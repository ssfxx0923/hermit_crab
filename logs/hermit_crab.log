[2025-11-22 11:18:24] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:18:24] [INFO] CloudFlare API已初始化
[2025-11-22 11:18:24] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:18:24] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:18:24] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 11:18:24] [INFO] 服务器列表已保存
[2025-11-22 11:18:24] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 11:18:24] [INFO] ✅ 已从本地列表删除
[2025-11-22 11:18:24] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:18:26] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:18:26] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:19:44] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:19:44] [INFO] CloudFlare API已初始化
[2025-11-22 11:19:44] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:19:44] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:19:44] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 11:19:44] [INFO] 服务器列表已保存
[2025-11-22 11:19:44] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 11:19:44] [INFO] ✅ 已添加到本地列表
[2025-11-22 11:19:44] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:19:45] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:19:45] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:25:26] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:25:26] [INFO] CloudFlare API已初始化
[2025-11-22 11:25:26] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:25:26] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:25:26] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 11:25:26] [INFO] 服务器列表已保存
[2025-11-22 11:25:26] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 11:25:26] [INFO] ✅ 已从本地列表删除
[2025-11-22 11:25:26] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:25:28] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:25:28] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:25:31] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:25:31] [INFO] CloudFlare API已初始化
[2025-11-22 11:25:31] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:25:31] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:25:31] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 11:25:31] [INFO] 服务器列表已保存
[2025-11-22 11:25:31] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 11:25:31] [INFO] ✅ 已添加到本地列表
[2025-11-22 11:25:31] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:25:33] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:25:33] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:33:28] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:33:28] [INFO] CloudFlare API已初始化
[2025-11-22 11:33:28] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:33:28] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:33:28] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 11:33:28] [INFO] 服务器列表已保存
[2025-11-22 11:33:28] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 11:33:28] [INFO] ✅ 已从本地列表删除
[2025-11-22 11:33:28] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:33:29] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:33:29] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:33:33] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:33:33] [INFO] CloudFlare API已初始化
[2025-11-22 11:33:33] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:33:33] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:33:33] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 11:33:33] [INFO] 服务器列表已保存
[2025-11-22 11:33:33] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 11:33:33] [INFO] ✅ 已添加到本地列表
[2025-11-22 11:33:33] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:33:35] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:33:35] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:38:10] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:38:10] [INFO] CloudFlare API已初始化
[2025-11-22 11:38:10] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:38:10] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:38:10] [INFO] 剩余时间 13 天，暂不需要迁移
[2025-11-22 11:38:10] [INFO] ============================================================
[2025-11-22 11:38:10] [INFO] Hermit Crab 服务器状态
[2025-11-22 11:38:10] [INFO] ============================================================
[2025-11-22 11:38:10] [INFO] 状态: ✅ HEALTHY
[2025-11-22 11:38:10] [INFO] 当前IP: 170.64.226.135
[2025-11-22 11:38:10] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 11:38:10] [INFO] 添加日期: 2025-11-21
[2025-11-22 11:38:10] [INFO] 过期日期: 2025-12-06
[2025-11-22 11:38:10] [INFO] 剩余天数: 13 天
[2025-11-22 11:38:10] [INFO] 迁移次数: 11
[2025-11-22 11:38:10] [INFO] 需要迁移: 否
[2025-11-22 11:38:10] [INFO] ============================================================
[2025-11-22 11:38:10] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 11:38:10] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 11:38:11] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 11:38:11] [INFO] 服务器列表已保存
[2025-11-22 11:38:11] [INFO] 
可用服务器列表:
[2025-11-22 11:38:11] [INFO] ================================================================================
[2025-11-22 11:38:11] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 11:38:11] [INFO] ================================================================================
[2025-11-22 11:38:11] [INFO] 104.248.191.16     14           idle                                       
[2025-11-22 11:38:11] [INFO] ================================================================================
[2025-11-22 11:39:11] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:39:11] [INFO] CloudFlare API已初始化
[2025-11-22 11:39:11] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:39:11] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:39:11] [INFO] ============================================================
[2025-11-22 11:39:11] [INFO] 执行迁移检查
[2025-11-22 11:39:11] [INFO] ============================================================
[2025-11-22 11:39:11] [INFO] 剩余时间 13 天，暂不需要迁移
[2025-11-22 11:39:11] [INFO] 当前服务器剩余: 13 天
[2025-11-22 11:39:11] [INFO] ✅ 暂不需要迁移
[2025-11-22 11:43:04] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:43:04] [INFO] CloudFlare API已初始化
[2025-11-22 11:43:04] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:43:04] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:43:04] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 11:43:04] [INFO] 服务器列表已保存
[2025-11-22 11:43:04] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 11:43:04] [INFO] ✅ 已从本地列表删除
[2025-11-22 11:43:04] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:43:05] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:43:05] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:50:19] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:50:19] [INFO] CloudFlare API已初始化
[2025-11-22 11:50:19] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:50:19] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:50:19] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 11:50:19] [WARNING] 未找到服务器: 104.248.191.16
[2025-11-22 11:50:19] [ERROR] ❌ 删除失败
[2025-11-22 11:50:27] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:50:27] [INFO] CloudFlare API已初始化
[2025-11-22 11:50:27] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:50:27] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:50:27] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 11:50:27] [INFO] 服务器列表已保存
[2025-11-22 11:50:27] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 11:50:27] [INFO] ✅ 已添加到本地列表
[2025-11-22 11:50:27] [INFO] 推送服务器列表到GitHub...
[2025-11-22 11:50:28] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 11:50:28] [INFO] ✅ 已同步到GitHub
[2025-11-22 11:50:48] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:50:48] [INFO] CloudFlare API已初始化
[2025-11-22 11:50:48] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:50:48] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:50:48] [INFO] ============================================================
[2025-11-22 11:50:48] [INFO] 执行迁移检查
[2025-11-22 11:50:48] [INFO] ============================================================
[2025-11-22 11:50:48] [WARNING] 剩余时间 13 天，低于阈值 14 天，需要迁移！
[2025-11-22 11:50:48] [INFO] 当前服务器剩余: 13 天
[2025-11-22 11:50:48] [WARNING] 🚨 需要执行迁移！
[2025-11-22 11:51:39] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:51:39] [INFO] CloudFlare API已初始化
[2025-11-22 11:51:39] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:51:39] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:51:39] [INFO] ============================================================
[2025-11-22 11:51:39] [INFO] 执行迁移检查
[2025-11-22 11:51:39] [INFO] ============================================================
[2025-11-22 11:51:39] [WARNING] 剩余时间 13 天，低于阈值 14 天，需要迁移！
[2025-11-22 11:51:39] [INFO] 当前服务器剩余: 13 天
[2025-11-22 11:51:39] [WARNING] 🚨 需要执行迁移！
[2025-11-22 11:52:39] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:52:39] [INFO] CloudFlare API已初始化
[2025-11-22 11:52:39] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:52:39] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:52:39] [INFO] ============================================================
[2025-11-22 11:52:39] [INFO] 执行迁移检查
[2025-11-22 11:52:39] [INFO] ============================================================
[2025-11-22 11:52:39] [WARNING] 剩余时间 13 天，低于阈值 14 天，需要迁移！
[2025-11-22 11:52:39] [INFO] 当前服务器剩余: 13 天
[2025-11-22 11:52:39] [WARNING] 🚨 需要执行迁移！
[2025-11-22 11:52:55] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:52:55] [INFO] CloudFlare API已初始化
[2025-11-22 11:52:55] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:52:55] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:52:55] [WARNING] 剩余时间 13 天，低于阈值 14 天，需要迁移！
[2025-11-22 11:52:55] [INFO] ============================================================
[2025-11-22 11:52:55] [INFO] Hermit Crab 服务器状态
[2025-11-22 11:52:55] [INFO] ============================================================
[2025-11-22 11:52:55] [INFO] 状态: 🚨 CRITICAL
[2025-11-22 11:52:55] [INFO] 当前IP: 170.64.226.135
[2025-11-22 11:52:55] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 11:52:55] [INFO] 添加日期: 2025-11-21
[2025-11-22 11:52:55] [INFO] 过期日期: 2025-12-06
[2025-11-22 11:52:55] [INFO] 剩余天数: 13 天
[2025-11-22 11:52:55] [INFO] 迁移次数: 11
[2025-11-22 11:52:55] [INFO] 需要迁移: 是
[2025-11-22 11:52:55] [INFO] ============================================================
[2025-11-22 11:52:55] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 11:52:55] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 11:52:56] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 11:52:56] [INFO] 服务器列表已保存
[2025-11-22 11:52:56] [INFO] 
可用服务器列表:
[2025-11-22 11:52:56] [INFO] ================================================================================
[2025-11-22 11:52:56] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 11:52:56] [INFO] ================================================================================
[2025-11-22 11:52:56] [INFO] 104.248.191.16     14           idle                                       
[2025-11-22 11:52:56] [INFO] ================================================================================
[2025-11-22 11:53:33] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:53:33] [INFO] CloudFlare API已初始化
[2025-11-22 11:53:33] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:53:33] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:53:33] [INFO] ============================================================
[2025-11-22 11:53:33] [INFO] 执行迁移检查
[2025-11-22 11:53:33] [INFO] ============================================================
[2025-11-22 11:53:33] [INFO] 剩余时间 13 天，暂不需要迁移
[2025-11-22 11:53:33] [INFO] 当前服务器剩余: 13 天
[2025-11-22 11:53:33] [INFO] ✅ 暂不需要迁移
[2025-11-22 11:55:47] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:55:47] [INFO] CloudFlare API已初始化
[2025-11-22 11:55:47] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:55:47] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:55:47] [INFO] ============================================================
[2025-11-22 11:55:47] [INFO] 执行迁移检查
[2025-11-22 11:55:47] [INFO] ============================================================
[2025-11-22 11:55:47] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 11:55:47] [ERROR] ❌ 生命周期未初始化，请先运行: agent.py init
[2025-11-22 11:56:26] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:56:26] [INFO] CloudFlare API已初始化
[2025-11-22 11:56:26] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:56:26] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:56:26] [INFO] ============================================================
[2025-11-22 11:56:26] [INFO] 初始化 Hermit Crab
[2025-11-22 11:56:26] [INFO] ============================================================
[2025-11-22 11:56:26] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 11:56:26] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 11:56:26] [INFO] ✅ 初始化完成
[2025-11-22 11:56:26] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 11:56:26] [INFO] ============================================================
[2025-11-22 11:56:26] [INFO] Hermit Crab 服务器状态
[2025-11-22 11:56:26] [INFO] ============================================================
[2025-11-22 11:56:26] [INFO] 状态: ✅ HEALTHY
[2025-11-22 11:56:26] [INFO] 当前IP: 170.64.226.135
[2025-11-22 11:56:26] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 11:56:26] [INFO] 添加日期: 2025-11-22
[2025-11-22 11:56:26] [INFO] 过期日期: 2025-12-07
[2025-11-22 11:56:26] [INFO] 剩余天数: 14 天
[2025-11-22 11:56:26] [INFO] 迁移次数: 0
[2025-11-22 11:56:26] [INFO] 需要迁移: 否
[2025-11-22 11:56:26] [INFO] ============================================================
[2025-11-22 11:57:10] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:57:10] [INFO] CloudFlare API已初始化
[2025-11-22 11:57:10] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:57:10] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:57:10] [INFO] ============================================================
[2025-11-22 11:57:10] [INFO] 执行迁移检查
[2025-11-22 11:57:10] [INFO] ============================================================
[2025-11-22 11:57:10] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 11:57:10] [INFO] 当前服务器剩余: 14 天
[2025-11-22 11:57:10] [INFO] ✅ 暂不需要迁移
[2025-11-22 11:57:30] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:57:30] [INFO] CloudFlare API已初始化
[2025-11-22 11:57:30] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:57:30] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:57:30] [INFO] ============================================================
[2025-11-22 11:57:30] [INFO] 执行迁移检查
[2025-11-22 11:57:30] [INFO] ============================================================
[2025-11-22 11:57:30] [WARNING] 剩余时间 4 天，低于阈值 13 天，需要迁移！
[2025-11-22 11:57:30] [INFO] 当前服务器剩余: 4 天
[2025-11-22 11:57:30] [WARNING] 🚨 需要执行迁移！
[2025-11-22 11:58:48] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 11:58:48] [INFO] CloudFlare API已初始化
[2025-11-22 11:58:48] [INFO] Hermit Crab Agent 已启动
[2025-11-22 11:58:48] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 11:58:48] [INFO] ============================================================
[2025-11-22 11:58:48] [INFO] 执行迁移检查
[2025-11-22 11:58:48] [INFO] ============================================================
[2025-11-22 11:58:48] [WARNING] 剩余时间 4 天，低于阈值 13 天，需要迁移！
[2025-11-22 11:58:48] [INFO] 当前服务器剩余: 4 天
[2025-11-22 11:58:48] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:00:03] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:00:03] [INFO] CloudFlare API已初始化
[2025-11-22 12:00:03] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:00:03] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:00:03] [INFO] ============================================================
[2025-11-22 12:00:03] [INFO] 执行迁移检查
[2025-11-22 12:00:03] [INFO] ============================================================
[2025-11-22 12:00:03] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:00:03] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:00:03] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:07:18] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:07:18] [INFO] CloudFlare API已初始化
[2025-11-22 12:07:18] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:07:18] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:07:18] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:07:18] [INFO] ============================================================
[2025-11-22 12:07:18] [INFO] Hermit Crab 服务器状态
[2025-11-22 12:07:18] [INFO] ============================================================
[2025-11-22 12:07:18] [INFO] 状态: 🚨 CRITICAL
[2025-11-22 12:07:18] [INFO] 当前IP: 170.64.226.135
[2025-11-22 12:07:18] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 12:07:18] [INFO] 添加日期: 2025-11-12
[2025-11-22 12:07:18] [INFO] 过期日期: 2025-11-27
[2025-11-22 12:07:18] [INFO] 剩余天数: 4 天
[2025-11-22 12:07:18] [INFO] 迁移次数: 0
[2025-11-22 12:07:18] [INFO] 需要迁移: 是
[2025-11-22 12:07:18] [INFO] ============================================================
[2025-11-22 12:07:18] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 12:07:18] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:07:19] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:07:19] [INFO] 服务器列表已保存
[2025-11-22 12:07:19] [INFO] 
可用服务器列表:
[2025-11-22 12:07:19] [INFO] ================================================================================
[2025-11-22 12:07:19] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 12:07:19] [INFO] ================================================================================
[2025-11-22 12:07:19] [INFO] 104.248.191.16     14           idle                                       
[2025-11-22 12:07:19] [INFO] ================================================================================
[2025-11-22 12:09:39] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:09:39] [INFO] CloudFlare API已初始化
[2025-11-22 12:09:39] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:09:39] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:09:39] [INFO] ============================================================
[2025-11-22 12:09:39] [INFO] Hermit Crab 守护进程启动
[2025-11-22 12:09:39] [INFO] ============================================================
[2025-11-22 12:09:39] [INFO] 
[2025-11-22 12:09:39] 执行检查...
[2025-11-22 12:09:39] [INFO] ============================================================
[2025-11-22 12:09:39] [INFO] 执行迁移检查
[2025-11-22 12:09:39] [INFO] ============================================================
[2025-11-22 12:09:39] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:09:39] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:09:39] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:09:40] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 12:09:40] [INFO] ============================================================
[2025-11-22 12:09:40] [INFO] 开始执行迁移流程
[2025-11-22 12:09:40] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_120940.log
[2025-11-22 12:09:40] [INFO] ============================================================
[2025-11-22 12:09:40] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:09:40] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 12:09:40] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:09:40] [INFO] 从GitHub同步服务器列表...
[2025-11-22 12:09:40] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:09:41] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:09:41] [INFO] 服务器列表已保存
[2025-11-22 12:09:41] [INFO] 自动选择目标服务器...
[2025-11-22 12:09:41] [INFO] 找到 1 个可用服务器
[2025-11-22 12:09:41] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 12:09:41] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:09:41] [INFO] 目标剩余时间: 14 天
[2025-11-22 12:09:41] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 12:09:41] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 12:09:41] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:09:41] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:09:41] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:09:43] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:09:43] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 12:09:43] [INFO] 迁移开始时间: 2025-11-22 12:09:43
[2025-11-22 12:09:44] [INFO] ============================================================
[2025-11-22 12:09:44] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 12:09:44] [INFO] ============================================================
[2025-11-22 12:09:44] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:09:46] [INFO] SSH连接测试成功
[2025-11-22 12:09:46] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:09:51] [INFO] SSH密钥配置成功
[2025-11-22 12:09:51] [INFO] 在目标服务器备份关键文件...
[2025-11-22 12:10:01] [INFO] 关键文件备份完成
[2025-11-22 12:10:01] [INFO] ============================================================
[2025-11-22 12:10:01] [INFO] 开始Rsync系统文件同步...
[2025-11-22 12:10:01] [INFO] ============================================================
[2025-11-22 12:10:01] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 12:10:01] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 12:10:01] [INFO] ------------------------------------------------------------
[2025-11-22 12:15:28] [INFO] ------------------------------------------------------------
[2025-11-22 12:15:28] [INFO] 传输统计: 共处理 1216068 个文件/目录
[2025-11-22 12:15:28] [INFO] ✅ Rsync同步完成 (耗时: 326.75秒)
[2025-11-22 12:15:28] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 12:15:28] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:15:33] [INFO] SSH密钥配置成功
[2025-11-22 12:15:33] [INFO] 恢复目标服务器网络配置...
[2025-11-22 12:15:41] [INFO] 网络配置恢复完成
[2025-11-22 12:15:41] [INFO] ============================================================
[2025-11-22 12:15:41] [INFO] ✅ 迁移完成！
[2025-11-22 12:15:41] [INFO] ============================================================
[2025-11-22 12:15:41] [INFO] ============================================================
[2025-11-22 12:15:41] [INFO] 开始初始化目标服务器
[2025-11-22 12:15:41] [INFO] 目标IP: 104.248.191.16
[2025-11-22 12:15:41] [INFO] 目标剩余天数: 14
[2025-11-22 12:15:41] [INFO] ============================================================
[2025-11-22 12:15:41] [INFO] 同步配置文件到目标服务器...
[2025-11-22 12:15:45] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 12:15:48] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 12:15:48] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 12:15:51] [INFO] ✅ 生命周期信息已更新
[2025-11-22 12:15:51] [INFO] 配置目标服务器systemd服务...
[2025-11-22 12:15:58] [INFO] ✅ Systemd服务配置完成
[2025-11-22 12:15:58] [INFO] 创建迁移标记文件...
[2025-11-22 12:16:00] [INFO] ✅ 迁移标记已创建
[2025-11-22 12:16:00] [INFO] 准备重启目标服务器...
[2025-11-22 12:16:02] [INFO] ✅ 重启命令已发送
[2025-11-22 12:16:02] [INFO] ⏳ 等待服务器重启...
[2025-11-22 12:16:12] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 12:16:12] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:16:15] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 12:16:25] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:16:27] [INFO] SSH连接测试成功
[2025-11-22 12:16:27] [INFO] ✅ 目标服务器已上线 (耗时: 15秒)
[2025-11-22 12:16:27] [INFO] 验证目标服务器服务状态...
[2025-11-22 12:16:29] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 12:16:31] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 12:16:31] [INFO] ============================================================
[2025-11-22 12:16:31] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 12:16:31] [INFO] ============================================================
[2025-11-22 12:16:31] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 12:16:31] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:16:32] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:16:32] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 12:16:32] [INFO] ✅ DNS已更新
[2025-11-22 12:16:32] [INFO] 更新服务器状态...
[2025-11-22 12:16:32] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:16:32] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:16:32] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 12:16:32] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:16:34] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:16:34] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 12:16:34] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:16:34] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:16:34] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:16:36] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:16:36] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 12:16:37] [INFO] ============================================================
[2025-11-22 12:16:37] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 12:16:37] [INFO] ============================================================
[2025-11-22 12:16:37] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 12:16:37] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:16:37] [INFO] 迁移开始时间: 2025-11-22 12:09:43
[2025-11-22 12:16:37] [INFO] 迁移结束时间: 2025-11-22 12:16:36
[2025-11-22 12:16:37] [INFO] 总耗时: 412.88秒 (6.9分钟)
[2025-11-22 12:16:37] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_120940.log
[2025-11-22 12:16:37] [INFO] ============================================================
[2025-11-22 12:16:37] [INFO] 自动迁移成功！
[2025-11-22 12:17:38] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:17:38] [INFO] CloudFlare API已初始化
[2025-11-22 12:17:38] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:17:38] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:17:38] [INFO] ============================================================
[2025-11-22 12:17:38] [INFO] Hermit Crab 守护进程启动
[2025-11-22 12:17:38] [INFO] ============================================================
[2025-11-22 12:17:38] [INFO] 
[2025-11-22 12:17:38] 执行检查...
[2025-11-22 12:17:38] [INFO] ============================================================
[2025-11-22 12:17:38] [INFO] 执行迁移检查
[2025-11-22 12:17:38] [INFO] ============================================================
[2025-11-22 12:17:38] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:17:38] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:17:38] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:17:39] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 12:17:39] [INFO] ============================================================
[2025-11-22 12:17:39] [INFO] 开始执行迁移流程
[2025-11-22 12:17:39] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_121739.log
[2025-11-22 12:17:39] [INFO] ============================================================
[2025-11-22 12:17:39] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:17:39] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 12:17:39] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:17:39] [INFO] 从GitHub同步服务器列表...
[2025-11-22 12:17:39] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:17:40] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:17:40] [INFO] 服务器列表已保存
[2025-11-22 12:17:40] [INFO] 自动选择目标服务器...
[2025-11-22 12:17:40] [INFO] 找到 1 个可用服务器
[2025-11-22 12:17:40] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 12:17:40] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:17:40] [INFO] 目标剩余时间: 14 天
[2025-11-22 12:17:40] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 12:17:40] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 12:17:40] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:17:40] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:17:40] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:17:42] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:17:42] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 12:17:42] [INFO] 迁移开始时间: 2025-11-22 12:17:42
[2025-11-22 12:17:42] [INFO] ============================================================
[2025-11-22 12:17:42] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 12:17:42] [INFO] ============================================================
[2025-11-22 12:17:42] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:17:45] [INFO] SSH连接测试成功
[2025-11-22 12:17:45] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:17:48] [INFO] SSH密钥配置成功
[2025-11-22 12:17:48] [INFO] 在目标服务器备份关键文件...
[2025-11-22 12:17:58] [INFO] 关键文件备份完成
[2025-11-22 12:17:58] [INFO] ============================================================
[2025-11-22 12:17:58] [INFO] 开始Rsync系统文件同步...
[2025-11-22 12:17:58] [INFO] ============================================================
[2025-11-22 12:17:58] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 12:17:58] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 12:17:58] [INFO] ------------------------------------------------------------
[2025-11-22 12:19:40] [INFO] ------------------------------------------------------------
[2025-11-22 12:19:40] [INFO] 传输统计: 共处理 240 个文件/目录
[2025-11-22 12:19:40] [INFO] ✅ Rsync同步完成 (耗时: 102.29秒)
[2025-11-22 12:19:40] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 12:19:40] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:19:45] [INFO] SSH密钥配置成功
[2025-11-22 12:19:45] [INFO] 恢复目标服务器网络配置...
[2025-11-22 12:19:54] [INFO] 网络配置恢复完成
[2025-11-22 12:19:54] [INFO] ============================================================
[2025-11-22 12:19:54] [INFO] ✅ 迁移完成！
[2025-11-22 12:19:54] [INFO] ============================================================
[2025-11-22 12:19:54] [INFO] ============================================================
[2025-11-22 12:19:54] [INFO] 开始初始化目标服务器
[2025-11-22 12:19:54] [INFO] 目标IP: 104.248.191.16
[2025-11-22 12:19:54] [INFO] 目标剩余天数: 14
[2025-11-22 12:19:54] [INFO] ============================================================
[2025-11-22 12:19:54] [INFO] 同步配置文件到目标服务器...
[2025-11-22 12:19:57] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 12:20:00] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 12:20:00] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 12:20:04] [INFO] ✅ 生命周期信息已更新
[2025-11-22 12:20:04] [INFO] 配置目标服务器systemd服务...
[2025-11-22 12:20:11] [INFO] ✅ Systemd服务配置完成
[2025-11-22 12:20:11] [INFO] 创建迁移标记文件...
[2025-11-22 12:20:13] [INFO] ✅ 迁移标记已创建
[2025-11-22 12:20:13] [INFO] 准备重启目标服务器...
[2025-11-22 12:20:15] [INFO] ✅ 重启命令已发送
[2025-11-22 12:20:15] [INFO] ⏳ 等待服务器重启...
[2025-11-22 12:20:25] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 12:20:25] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:20:26] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 12:20:36] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:20:39] [INFO] SSH连接测试成功
[2025-11-22 12:20:39] [INFO] ✅ 目标服务器已上线 (耗时: 13秒)
[2025-11-22 12:20:39] [INFO] 验证目标服务器服务状态...
[2025-11-22 12:20:40] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 12:20:42] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 12:20:42] [INFO] ============================================================
[2025-11-22 12:20:42] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 12:20:42] [INFO] ============================================================
[2025-11-22 12:20:42] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 12:20:42] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:20:43] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:20:43] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 12:20:43] [INFO] ✅ DNS已更新
[2025-11-22 12:20:43] [INFO] 更新服务器状态...
[2025-11-22 12:20:43] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:20:43] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:20:43] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 12:20:43] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:20:45] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:20:45] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 12:20:45] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:20:45] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:20:45] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:20:47] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:20:47] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 12:20:47] [INFO] ============================================================
[2025-11-22 12:20:47] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 12:20:47] [INFO] ============================================================
[2025-11-22 12:20:47] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 12:20:47] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:20:47] [INFO] 迁移开始时间: 2025-11-22 12:17:42
[2025-11-22 12:20:47] [INFO] 迁移结束时间: 2025-11-22 12:20:47
[2025-11-22 12:20:47] [INFO] 总耗时: 185.10秒 (3.1分钟)
[2025-11-22 12:20:47] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_121739.log
[2025-11-22 12:20:47] [INFO] ============================================================
[2025-11-22 12:20:47] [INFO] 自动迁移成功！
[2025-11-22 12:21:49] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:21:49] [INFO] CloudFlare API已初始化
[2025-11-22 12:21:49] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:21:49] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [INFO] Hermit Crab 守护进程启动
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [INFO] 
[2025-11-22 12:21:49] 执行检查...
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [INFO] 执行迁移检查
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:21:49] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:21:49] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:21:49] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [INFO] 开始执行迁移流程
[2025-11-22 12:21:49] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_122149.log
[2025-11-22 12:21:49] [INFO] ============================================================
[2025-11-22 12:21:49] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:21:49] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 12:21:49] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:21:49] [INFO] 从GitHub同步服务器列表...
[2025-11-22 12:21:49] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:21:50] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:21:50] [INFO] 服务器列表已保存
[2025-11-22 12:21:50] [INFO] 自动选择目标服务器...
[2025-11-22 12:21:50] [INFO] 找到 1 个可用服务器
[2025-11-22 12:21:50] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 12:21:50] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:21:50] [INFO] 目标剩余时间: 14 天
[2025-11-22 12:21:50] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 12:21:50] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 12:21:50] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:21:50] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:21:50] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:21:52] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:21:52] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 12:21:52] [INFO] 迁移开始时间: 2025-11-22 12:21:52
[2025-11-22 12:21:53] [INFO] ============================================================
[2025-11-22 12:21:53] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 12:21:53] [INFO] ============================================================
[2025-11-22 12:21:53] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:21:55] [INFO] SSH连接测试成功
[2025-11-22 12:21:55] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:21:58] [INFO] SSH密钥配置成功
[2025-11-22 12:21:58] [INFO] 在目标服务器备份关键文件...
[2025-11-22 12:22:08] [INFO] 关键文件备份完成
[2025-11-22 12:22:08] [INFO] ============================================================
[2025-11-22 12:22:08] [INFO] 开始Rsync系统文件同步...
[2025-11-22 12:22:08] [INFO] ============================================================
[2025-11-22 12:22:08] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 12:22:08] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 12:22:08] [INFO] ------------------------------------------------------------
[2025-11-22 12:23:46] [INFO] ------------------------------------------------------------
[2025-11-22 12:23:46] [INFO] 传输统计: 共处理 173 个文件/目录
[2025-11-22 12:23:46] [INFO] ✅ Rsync同步完成 (耗时: 97.43秒)
[2025-11-22 12:23:46] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 12:23:46] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:23:51] [INFO] SSH密钥配置成功
[2025-11-22 12:23:51] [INFO] 恢复目标服务器网络配置...
[2025-11-22 12:23:59] [INFO] 网络配置恢复完成
[2025-11-22 12:23:59] [INFO] ============================================================
[2025-11-22 12:23:59] [INFO] ✅ 迁移完成！
[2025-11-22 12:23:59] [INFO] ============================================================
[2025-11-22 12:23:59] [INFO] ============================================================
[2025-11-22 12:23:59] [INFO] 开始初始化目标服务器
[2025-11-22 12:23:59] [INFO] 目标IP: 104.248.191.16
[2025-11-22 12:23:59] [INFO] 目标剩余天数: 14
[2025-11-22 12:23:59] [INFO] ============================================================
[2025-11-22 12:23:59] [INFO] 同步配置文件到目标服务器...
[2025-11-22 12:24:03] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 12:24:06] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 12:24:06] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 12:24:08] [INFO] ✅ 生命周期信息已更新
[2025-11-22 12:24:08] [INFO] 配置目标服务器systemd服务...
[2025-11-22 12:24:15] [INFO] ✅ Systemd服务配置完成
[2025-11-22 12:24:15] [INFO] 创建迁移标记文件...
[2025-11-22 12:24:17] [INFO] ✅ 迁移标记已创建
[2025-11-22 12:24:17] [INFO] 准备重启目标服务器...
[2025-11-22 12:24:19] [INFO] ✅ 重启命令已发送
[2025-11-22 12:24:19] [INFO] ⏳ 等待服务器重启...
[2025-11-22 12:24:29] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 12:24:29] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:24:30] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 12:24:40] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:24:43] [INFO] SSH连接测试成功
[2025-11-22 12:24:43] [INFO] ✅ 目标服务器已上线 (耗时: 13秒)
[2025-11-22 12:24:43] [INFO] 验证目标服务器服务状态...
[2025-11-22 12:24:44] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 12:24:46] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 12:24:46] [INFO] ============================================================
[2025-11-22 12:24:46] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 12:24:46] [INFO] ============================================================
[2025-11-22 12:24:46] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 12:24:46] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:24:47] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:24:47] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 12:24:47] [INFO] ✅ DNS已更新
[2025-11-22 12:24:47] [INFO] 更新服务器状态...
[2025-11-22 12:24:47] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:24:47] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:24:47] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 12:24:47] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:24:49] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:24:49] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 12:24:49] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:24:50] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:24:50] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:24:51] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:24:51] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 12:24:52] [INFO] ============================================================
[2025-11-22 12:24:52] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 12:24:52] [INFO] ============================================================
[2025-11-22 12:24:52] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 12:24:52] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:24:52] [INFO] 迁移开始时间: 2025-11-22 12:21:52
[2025-11-22 12:24:52] [INFO] 迁移结束时间: 2025-11-22 12:24:51
[2025-11-22 12:24:52] [INFO] 总耗时: 179.45秒 (3.0分钟)
[2025-11-22 12:24:52] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_122149.log
[2025-11-22 12:24:52] [INFO] ============================================================
[2025-11-22 12:24:52] [INFO] 自动迁移成功！
[2025-11-22 12:25:53] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:25:53] [INFO] CloudFlare API已初始化
[2025-11-22 12:25:53] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:25:53] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:25:53] [INFO] ============================================================
[2025-11-22 12:25:53] [INFO] Hermit Crab 守护进程启动
[2025-11-22 12:25:53] [INFO] ============================================================
[2025-11-22 12:25:53] [INFO] 
[2025-11-22 12:25:53] 执行检查...
[2025-11-22 12:25:53] [INFO] ============================================================
[2025-11-22 12:25:53] [INFO] 执行迁移检查
[2025-11-22 12:25:53] [INFO] ============================================================
[2025-11-22 12:25:53] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:25:53] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:25:53] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:25:54] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 12:25:54] [INFO] ============================================================
[2025-11-22 12:25:54] [INFO] 开始执行迁移流程
[2025-11-22 12:25:54] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_122554.log
[2025-11-22 12:25:54] [INFO] ============================================================
[2025-11-22 12:25:54] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:25:54] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 12:25:54] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:25:54] [INFO] 从GitHub同步服务器列表...
[2025-11-22 12:25:54] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:25:55] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:25:55] [INFO] 服务器列表已保存
[2025-11-22 12:25:55] [INFO] 自动选择目标服务器...
[2025-11-22 12:25:55] [INFO] 找到 1 个可用服务器
[2025-11-22 12:25:55] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 12:25:55] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:25:55] [INFO] 目标剩余时间: 14 天
[2025-11-22 12:25:55] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 12:25:55] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 12:25:55] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:25:55] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:25:55] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:25:57] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:25:57] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 12:25:57] [INFO] 迁移开始时间: 2025-11-22 12:25:57
[2025-11-22 12:25:57] [INFO] ============================================================
[2025-11-22 12:25:57] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 12:25:57] [INFO] ============================================================
[2025-11-22 12:25:57] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:26:00] [INFO] SSH连接测试成功
[2025-11-22 12:26:00] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:26:03] [INFO] SSH密钥配置成功
[2025-11-22 12:26:03] [INFO] 在目标服务器备份关键文件...
[2025-11-22 12:26:13] [INFO] 关键文件备份完成
[2025-11-22 12:26:13] [INFO] ============================================================
[2025-11-22 12:26:13] [INFO] 开始Rsync系统文件同步...
[2025-11-22 12:26:13] [INFO] ============================================================
[2025-11-22 12:26:13] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 12:26:13] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 12:26:13] [INFO] ------------------------------------------------------------
[2025-11-22 12:26:54] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:26:54] [INFO] CloudFlare API已初始化
[2025-11-22 12:26:54] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:26:54] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:26:54] [INFO] ============================================================
[2025-11-22 12:26:54] [INFO] 执行迁移检查
[2025-11-22 12:26:54] [INFO] ============================================================
[2025-11-22 12:26:54] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:26:54] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:26:54] [WARNING] 🚨 需要执行迁移！
[2025-11-22 12:27:02] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:27:02] [INFO] CloudFlare API已初始化
[2025-11-22 12:27:02] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:27:02] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:27:02] [INFO] ============================================================
[2025-11-22 12:27:02] [INFO] 初始化 Hermit Crab
[2025-11-22 12:27:02] [INFO] ============================================================
[2025-11-22 12:27:03] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 12:27:03] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 12:27:03] [INFO] ✅ 初始化完成
[2025-11-22 12:27:03] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 12:27:03] [INFO] ============================================================
[2025-11-22 12:27:03] [INFO] Hermit Crab 服务器状态
[2025-11-22 12:27:03] [INFO] ============================================================
[2025-11-22 12:27:03] [INFO] 状态: ✅ HEALTHY
[2025-11-22 12:27:03] [INFO] 当前IP: 170.64.226.135
[2025-11-22 12:27:03] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 12:27:03] [INFO] 添加日期: 2025-11-22
[2025-11-22 12:27:03] [INFO] 过期日期: 2025-12-07
[2025-11-22 12:27:03] [INFO] 剩余天数: 14 天
[2025-11-22 12:27:03] [INFO] 迁移次数: 0
[2025-11-22 12:27:03] [INFO] 需要迁移: 否
[2025-11-22 12:27:03] [INFO] ============================================================
[2025-11-22 12:27:50] [INFO] ------------------------------------------------------------
[2025-11-22 12:27:50] [INFO] 传输统计: 共处理 209 个文件/目录
[2025-11-22 12:27:50] [INFO] ✅ Rsync同步完成 (耗时: 97.29秒)
[2025-11-22 12:27:50] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 12:27:50] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 12:27:55] [INFO] SSH密钥配置成功
[2025-11-22 12:27:55] [INFO] 恢复目标服务器网络配置...
[2025-11-22 12:28:04] [INFO] 网络配置恢复完成
[2025-11-22 12:28:04] [INFO] ============================================================
[2025-11-22 12:28:04] [INFO] ✅ 迁移完成！
[2025-11-22 12:28:04] [INFO] ============================================================
[2025-11-22 12:28:04] [INFO] ============================================================
[2025-11-22 12:28:04] [INFO] 开始初始化目标服务器
[2025-11-22 12:28:04] [INFO] 目标IP: 104.248.191.16
[2025-11-22 12:28:04] [INFO] 目标剩余天数: 14
[2025-11-22 12:28:04] [INFO] ============================================================
[2025-11-22 12:28:04] [INFO] 同步配置文件到目标服务器...
[2025-11-22 12:28:07] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 12:28:08] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:28:08] [INFO] CloudFlare API已初始化
[2025-11-22 12:28:08] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:28:08] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:28:08] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 12:28:08] [INFO] ============================================================
[2025-11-22 12:28:08] [INFO] Hermit Crab 服务器状态
[2025-11-22 12:28:08] [INFO] ============================================================
[2025-11-22 12:28:08] [INFO] 状态: ✅ HEALTHY
[2025-11-22 12:28:08] [INFO] 当前IP: 170.64.226.135
[2025-11-22 12:28:08] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 12:28:08] [INFO] 添加日期: 2025-11-22
[2025-11-22 12:28:08] [INFO] 过期日期: 2025-12-07
[2025-11-22 12:28:08] [INFO] 剩余天数: 14 天
[2025-11-22 12:28:08] [INFO] 迁移次数: 0
[2025-11-22 12:28:08] [INFO] 需要迁移: 否
[2025-11-22 12:28:08] [INFO] ============================================================
[2025-11-22 12:28:08] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 12:28:08] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:28:09] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:28:09] [INFO] 服务器列表已保存
[2025-11-22 12:28:09] [INFO] 
可用服务器列表:
[2025-11-22 12:28:09] [INFO] ================================================================================
[2025-11-22 12:28:09] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 12:28:09] [INFO] ================================================================================
[2025-11-22 12:28:09] [INFO] 104.248.191.16     14           transferring                               
[2025-11-22 12:28:09] [INFO] ================================================================================
[2025-11-22 12:28:10] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 12:28:10] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 12:28:13] [INFO] ✅ 生命周期信息已更新
[2025-11-22 12:28:13] [INFO] 配置目标服务器systemd服务...
[2025-11-22 12:28:19] [INFO] ✅ Systemd服务配置完成
[2025-11-22 12:28:19] [INFO] 创建迁移标记文件...
[2025-11-22 12:28:21] [INFO] ✅ 迁移标记已创建
[2025-11-22 12:28:21] [INFO] 准备重启目标服务器...
[2025-11-22 12:28:23] [INFO] ✅ 重启命令已发送
[2025-11-22 12:28:23] [INFO] ⏳ 等待服务器重启...
[2025-11-22 12:28:33] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 12:28:33] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:28:35] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 12:28:45] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 12:28:47] [INFO] SSH连接测试成功
[2025-11-22 12:28:47] [INFO] ✅ 目标服务器已上线 (耗时: 13秒)
[2025-11-22 12:28:47] [INFO] 验证目标服务器服务状态...
[2025-11-22 12:28:49] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 12:28:51] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 12:28:51] [INFO] ============================================================
[2025-11-22 12:28:51] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 12:28:51] [INFO] ============================================================
[2025-11-22 12:28:51] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 12:28:51] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:28:51] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 12:28:51] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 12:28:51] [INFO] ✅ DNS已更新
[2025-11-22 12:28:51] [INFO] 更新服务器状态...
[2025-11-22 12:28:51] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:28:52] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:28:52] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 12:28:52] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:28:53] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:28:53] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 12:28:53] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:28:54] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:28:54] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:28:55] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:28:55] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 12:28:56] [INFO] ============================================================
[2025-11-22 12:28:56] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 12:28:56] [INFO] ============================================================
[2025-11-22 12:28:56] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 12:28:56] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 12:28:56] [INFO] 迁移开始时间: 2025-11-22 12:25:57
[2025-11-22 12:28:56] [INFO] 迁移结束时间: 2025-11-22 12:28:55
[2025-11-22 12:28:56] [INFO] 总耗时: 178.34秒 (3.0分钟)
[2025-11-22 12:28:56] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_122554.log
[2025-11-22 12:28:56] [INFO] ============================================================
[2025-11-22 12:28:56] [INFO] 自动迁移成功！
[2025-11-22 12:36:28] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:36:28] [INFO] CloudFlare API已初始化
[2025-11-22 12:36:28] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:36:28] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:36:28] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 12:36:28] [INFO] ============================================================
[2025-11-22 12:36:28] [INFO] Hermit Crab 服务器状态
[2025-11-22 12:36:28] [INFO] ============================================================
[2025-11-22 12:36:28] [INFO] 状态: ✅ HEALTHY
[2025-11-22 12:36:28] [INFO] 当前IP: 170.64.226.135
[2025-11-22 12:36:28] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 12:36:28] [INFO] 添加日期: 2025-11-22
[2025-11-22 12:36:28] [INFO] 过期日期: 2025-12-07
[2025-11-22 12:36:28] [INFO] 剩余天数: 14 天
[2025-11-22 12:36:28] [INFO] 迁移次数: 1
[2025-11-22 12:36:28] [INFO] 需要迁移: 否
[2025-11-22 12:36:28] [INFO] ============================================================
[2025-11-22 12:36:28] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 12:36:28] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 12:36:29] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 12:36:29] [INFO] 服务器列表已保存
[2025-11-22 12:36:29] [INFO] 
可用服务器列表:
[2025-11-22 12:36:29] [INFO] ================================================================================
[2025-11-22 12:36:29] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 12:36:29] [INFO] ================================================================================
[2025-11-22 12:36:29] [INFO] 104.248.191.16     14           active                                     
[2025-11-22 12:36:29] [INFO] ================================================================================
[2025-11-22 12:43:37] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:43:37] [INFO] CloudFlare API已初始化
[2025-11-22 12:43:37] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:43:37] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:43:37] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 12:43:37] [INFO] 服务器列表已保存
[2025-11-22 12:43:37] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 12:43:37] [INFO] ✅ 已从本地列表删除
[2025-11-22 12:43:37] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:43:38] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:43:38] [INFO] ✅ 已同步到GitHub
[2025-11-22 12:43:54] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:43:54] [INFO] CloudFlare API已初始化
[2025-11-22 12:43:54] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:43:54] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:43:54] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 12:43:54] [INFO] 服务器列表已保存
[2025-11-22 12:43:54] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 12:43:54] [INFO] ✅ 已添加到本地列表
[2025-11-22 12:43:54] [INFO] 推送服务器列表到GitHub...
[2025-11-22 12:43:55] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 12:43:55] [INFO] ✅ 已同步到GitHub
[2025-11-22 12:44:06] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:44:06] [INFO] CloudFlare API已初始化
[2025-11-22 12:44:06] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:44:06] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:44:06] [INFO] ============================================================
[2025-11-22 12:44:06] [INFO] 执行迁移检查
[2025-11-22 12:44:06] [INFO] ============================================================
[2025-11-22 12:44:06] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 12:44:06] [INFO] 当前服务器剩余: 14 天
[2025-11-22 12:44:06] [INFO] ✅ 暂不需要迁移
[2025-11-22 12:44:39] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 12:44:39] [INFO] CloudFlare API已初始化
[2025-11-22 12:44:39] [INFO] Hermit Crab Agent 已启动
[2025-11-22 12:44:39] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 12:44:39] [INFO] ============================================================
[2025-11-22 12:44:39] [INFO] 执行迁移检查
[2025-11-22 12:44:39] [INFO] ============================================================
[2025-11-22 12:44:39] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 12:44:39] [INFO] 当前服务器剩余: 4 天
[2025-11-22 12:44:39] [WARNING] 🚨 需要执行迁移！
[2025-11-22 13:00:14] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:00:14] [INFO] CloudFlare API已初始化
[2025-11-22 13:00:14] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:00:14] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [INFO] Hermit Crab 守护进程启动
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [INFO] 
[2025-11-22 13:00:14] 执行检查...
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [INFO] 执行迁移检查
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:00:14] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:00:14] [WARNING] 🚨 需要执行迁移！
[2025-11-22 13:00:14] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [INFO] 开始执行迁移流程
[2025-11-22 13:00:14] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_130014.log
[2025-11-22 13:00:14] [INFO] ============================================================
[2025-11-22 13:00:14] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:00:14] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 13:00:14] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:00:14] [INFO] 从GitHub同步服务器列表...
[2025-11-22 13:00:14] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:00:15] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:00:15] [INFO] 服务器列表已保存
[2025-11-22 13:00:15] [INFO] 自动选择目标服务器...
[2025-11-22 13:00:15] [INFO] 找到 1 个可用服务器
[2025-11-22 13:00:15] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 13:00:15] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 13:00:15] [INFO] 目标剩余时间: 14 天
[2025-11-22 13:00:15] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 13:00:15] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 13:00:15] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:00:16] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:00:16] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:00:17] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:00:17] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 13:00:17] [INFO] 迁移开始时间: 2025-11-22 13:00:17
[2025-11-22 13:00:17] [INFO] ============================================================
[2025-11-22 13:00:17] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 13:00:17] [INFO] ============================================================
[2025-11-22 13:00:17] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:00:18] [INFO] 
收到退出信号，守护进程停止
[2025-11-22 13:04:56] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:04:56] [INFO] CloudFlare API已初始化
[2025-11-22 13:04:56] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:04:56] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:04:56] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:04:56] [INFO] ============================================================
[2025-11-22 13:04:56] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:04:56] [INFO] ============================================================
[2025-11-22 13:04:56] [ERROR] ⚠️  生命周期未初始化
[2025-11-22 13:04:56] [INFO] ============================================================
[2025-11-22 13:04:56] [INFO] 自动迁移状态
[2025-11-22 13:04:56] [INFO] ============================================================
[2025-11-22 13:04:56] [INFO] 状态: ❌ 未启动
[2025-11-22 13:04:56] [INFO] 说明: 需要手动执行迁移
[2025-11-22 13:04:56] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 13:04:56] [INFO] ============================================================
[2025-11-22 13:04:56] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 13:04:56] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:04:57] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:04:57] [INFO] 服务器列表已保存
[2025-11-22 13:04:57] [INFO] 
可用服务器列表:
[2025-11-22 13:04:57] [INFO] ================================================================================
[2025-11-22 13:04:57] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:04:57] [INFO] ================================================================================
[2025-11-22 13:04:57] [INFO] 104.248.191.16     14           transferring                               
[2025-11-22 13:04:57] [INFO] ================================================================================
[2025-11-22 13:06:26] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:06:26] [INFO] CloudFlare API已初始化
[2025-11-22 13:06:26] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:06:26] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:06:26] [INFO] ============================================================
[2025-11-22 13:06:26] [INFO] 启动自动迁移
[2025-11-22 13:06:26] [INFO] ============================================================
[2025-11-22 13:06:26] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 13:06:26] [INFO] ✅ 自动迁移已启动
[2025-11-22 13:06:26] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 13:06:26] [INFO] ============================================================
[2025-11-22 13:06:27] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:06:27] [INFO] CloudFlare API已初始化
[2025-11-22 13:06:27] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:06:27] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:06:27] [INFO] ============================================================
[2025-11-22 13:06:27] [INFO] Hermit Crab 守护进程启动
[2025-11-22 13:06:27] [INFO] ============================================================
[2025-11-22 13:06:27] [INFO] 
[2025-11-22 13:06:27] 执行检查...
[2025-11-22 13:06:27] [INFO] ============================================================
[2025-11-22 13:06:27] [INFO] 执行迁移检查
[2025-11-22 13:06:27] [INFO] ============================================================
[2025-11-22 13:06:27] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:06:27] [ERROR] ❌ 生命周期未初始化，请先运行: agent.py init
[2025-11-22 13:06:27] [INFO] 下次检查时间: 3600秒后
[2025-11-22 13:06:34] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:06:34] [INFO] CloudFlare API已初始化
[2025-11-22 13:06:34] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:06:34] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:06:34] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:06:34] [INFO] ============================================================
[2025-11-22 13:06:34] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:06:34] [INFO] ============================================================
[2025-11-22 13:06:34] [ERROR] ⚠️  生命周期未初始化
[2025-11-22 13:06:34] [INFO] ============================================================
[2025-11-22 13:06:34] [INFO] 自动迁移状态
[2025-11-22 13:06:34] [INFO] ============================================================
[2025-11-22 13:06:34] [INFO] 状态: ✅ 已启动
[2025-11-22 13:06:34] [INFO] 说明: 系统将自动监控并在需要时执行迁移
[2025-11-22 13:06:34] [INFO] ============================================================
[2025-11-22 13:06:34] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 13:06:34] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:06:34] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:06:34] [INFO] 服务器列表已保存
[2025-11-22 13:06:34] [INFO] 
可用服务器列表:
[2025-11-22 13:06:34] [INFO] ================================================================================
[2025-11-22 13:06:34] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:06:34] [INFO] ================================================================================
[2025-11-22 13:06:34] [INFO] 104.248.191.16     14           transferring                               
[2025-11-22 13:06:34] [INFO] ================================================================================
[2025-11-22 13:07:14] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:07:14] [INFO] CloudFlare API已初始化
[2025-11-22 13:07:14] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:07:14] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:07:14] [INFO] ============================================================
[2025-11-22 13:07:14] [INFO] 停止自动迁移
[2025-11-22 13:07:14] [INFO] ============================================================
[2025-11-22 13:07:14] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 13:07:15] [INFO] ✅ 自动迁移已停止
[2025-11-22 13:07:15] [INFO] 需要手动执行 'hermit-crab migrate' 进行迁移
[2025-11-22 13:07:15] [INFO] ============================================================
[2025-11-22 13:07:33] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:07:33] [INFO] CloudFlare API已初始化
[2025-11-22 13:07:33] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:07:33] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:07:33] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:07:33] [INFO] ============================================================
[2025-11-22 13:07:33] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:07:33] [INFO] ============================================================
[2025-11-22 13:07:33] [ERROR] ⚠️  生命周期未初始化
[2025-11-22 13:07:33] [INFO] ============================================================
[2025-11-22 13:07:33] [INFO] 自动迁移状态
[2025-11-22 13:07:33] [INFO] ============================================================
[2025-11-22 13:07:33] [INFO] 状态: ❌ 未启动
[2025-11-22 13:07:33] [INFO] 说明: 需要手动执行迁移
[2025-11-22 13:07:33] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 13:07:33] [INFO] ============================================================
[2025-11-22 13:07:33] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 13:07:33] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:07:34] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:07:34] [INFO] 服务器列表已保存
[2025-11-22 13:07:34] [INFO] 
可用服务器列表:
[2025-11-22 13:07:34] [INFO] ================================================================================
[2025-11-22 13:07:34] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:07:34] [INFO] ================================================================================
[2025-11-22 13:07:34] [INFO] 104.248.191.16     14           transferring                               
[2025-11-22 13:07:34] [INFO] ================================================================================
[2025-11-22 13:08:30] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:08:30] [INFO] CloudFlare API已初始化
[2025-11-22 13:08:30] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:08:30] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:08:30] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:08:30] [INFO] ============================================================
[2025-11-22 13:08:30] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:08:30] [INFO] ============================================================
[2025-11-22 13:08:30] [ERROR] ⚠️  生命周期未初始化
[2025-11-22 13:08:30] [INFO] ============================================================
[2025-11-22 13:08:30] [INFO] 自动迁移状态
[2025-11-22 13:08:30] [INFO] ============================================================
[2025-11-22 13:08:30] [INFO] 状态: ❌ 未启动
[2025-11-22 13:08:30] [INFO] 说明: 需要手动执行迁移
[2025-11-22 13:08:30] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 13:08:30] [INFO] ============================================================
[2025-11-22 13:08:30] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 13:08:30] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:08:30] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:08:30] [INFO] 服务器列表已保存
[2025-11-22 13:08:30] [INFO] 
可用服务器列表:
[2025-11-22 13:08:30] [INFO] ================================================================================
[2025-11-22 13:08:30] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:08:30] [INFO] ================================================================================
[2025-11-22 13:08:30] [INFO] 104.248.191.16     14           transferring                               
[2025-11-22 13:08:30] [INFO] ================================================================================
[2025-11-22 13:18:57] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:18:57] [INFO] CloudFlare API已初始化
[2025-11-22 13:18:57] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:18:57] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:18:57] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 13:18:57] [WARNING] 服务器列表文件不存在: /root/hermit_crab/data/nodes.json
[2025-11-22 13:18:57] [INFO] 服务器列表已保存
[2025-11-22 13:18:57] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 13:18:57] [INFO] ✅ 已添加到本地列表
[2025-11-22 13:18:57] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:18:58] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:18:58] [INFO] ✅ 已同步到GitHub
[2025-11-22 13:19:15] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:19:15] [INFO] CloudFlare API已初始化
[2025-11-22 13:19:15] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:19:15] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:19:15] [INFO] ============================================================
[2025-11-22 13:19:15] [INFO] 执行迁移检查
[2025-11-22 13:19:15] [INFO] ============================================================
[2025-11-22 13:19:15] [WARNING] 生命周期文件不存在，需要初始化
[2025-11-22 13:19:15] [ERROR] ❌ 生命周期未初始化，请先运行: agent.py init
[2025-11-22 13:19:52] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:19:52] [INFO] CloudFlare API已初始化
[2025-11-22 13:19:52] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:19:52] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:19:52] [INFO] ============================================================
[2025-11-22 13:19:52] [INFO] 初始化 Hermit Crab
[2025-11-22 13:19:52] [INFO] ============================================================
[2025-11-22 13:19:52] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 13:19:52] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 13:19:52] [INFO] ✅ 初始化完成
[2025-11-22 13:19:52] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 13:19:52] [INFO] ============================================================
[2025-11-22 13:19:52] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:19:52] [INFO] ============================================================
[2025-11-22 13:19:52] [INFO] 状态: ✅ HEALTHY
[2025-11-22 13:19:52] [INFO] 当前IP: 170.64.226.135
[2025-11-22 13:19:52] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 13:19:52] [INFO] 添加日期: 2025-11-22
[2025-11-22 13:19:52] [INFO] 过期日期: 2025-12-07
[2025-11-22 13:19:52] [INFO] 剩余天数: 14 天
[2025-11-22 13:19:52] [INFO] 迁移次数: 0
[2025-11-22 13:19:52] [INFO] 需要迁移: 否
[2025-11-22 13:19:52] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:20:43] [INFO] CloudFlare API已初始化
[2025-11-22 13:20:43] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:20:43] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:20:43] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] 状态: 🚨 CRITICAL
[2025-11-22 13:20:43] [INFO] 当前IP: 170.64.226.135
[2025-11-22 13:20:43] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 13:20:43] [INFO] 添加日期: 2025-11-12
[2025-11-22 13:20:43] [INFO] 过期日期: 2025-11-27
[2025-11-22 13:20:43] [INFO] 剩余天数: 4 天
[2025-11-22 13:20:43] [INFO] 迁移次数: 0
[2025-11-22 13:20:43] [INFO] 需要迁移: 是
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] 自动迁移状态
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] 状态: ❌ 未启动
[2025-11-22 13:20:43] [INFO] 说明: 需要手动执行迁移
[2025-11-22 13:20:43] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 13:20:43] [INFO] ============================================================
[2025-11-22 13:20:43] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 13:20:43] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:20:44] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:20:44] [INFO] 服务器列表已保存
[2025-11-22 13:20:44] [INFO] 
可用服务器列表:
[2025-11-22 13:20:44] [INFO] ================================================================================
[2025-11-22 13:20:44] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:20:44] [INFO] ================================================================================
[2025-11-22 13:20:44] [INFO] 104.248.191.16     14           idle                                       
[2025-11-22 13:20:44] [INFO] ================================================================================
[2025-11-22 13:21:19] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:21:19] [INFO] CloudFlare API已初始化
[2025-11-22 13:21:19] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:21:19] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:21:19] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:21:20] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:21:20] [INFO] 服务器列表已保存
[2025-11-22 13:21:20] [INFO] ================================================================================
[2025-11-22 13:21:20] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 13:21:20] [INFO] ================================================================================
[2025-11-22 13:21:20] [INFO] 104.248.191.16     14           idle                                       
[2025-11-22 13:21:20] [INFO] ================================================================================
[2025-11-22 13:21:39] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:21:39] [INFO] CloudFlare API已初始化
[2025-11-22 13:21:39] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:21:39] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:21:39] [INFO] ============================================================
[2025-11-22 13:21:39] [INFO] 执行迁移检查
[2025-11-22 13:21:39] [INFO] ============================================================
[2025-11-22 13:21:39] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:21:39] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:21:39] [WARNING] 🚨 需要执行迁移！
[2025-11-22 13:22:02] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:22:02] [INFO] CloudFlare API已初始化
[2025-11-22 13:22:02] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:22:02] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:22:02] [INFO] ============================================================
[2025-11-22 13:22:02] [INFO] 启动自动迁移
[2025-11-22 13:22:02] [INFO] ============================================================
[2025-11-22 13:22:02] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 13:22:02] [INFO] ✅ 自动迁移已启动
[2025-11-22 13:22:02] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 13:22:02] [INFO] ============================================================
[2025-11-22 13:22:03] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:22:03] [INFO] CloudFlare API已初始化
[2025-11-22 13:22:03] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:22:03] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:22:03] [INFO] ============================================================
[2025-11-22 13:22:03] [INFO] Hermit Crab 守护进程启动
[2025-11-22 13:22:03] [INFO] ============================================================
[2025-11-22 13:22:03] [INFO] 
[2025-11-22 13:22:03] 执行检查...
[2025-11-22 13:22:03] [INFO] ============================================================
[2025-11-22 13:22:03] [INFO] 执行迁移检查
[2025-11-22 13:22:03] [INFO] ============================================================
[2025-11-22 13:22:03] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:22:03] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:22:03] [WARNING] 🚨 需要执行迁移！
[2025-11-22 13:22:04] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 13:22:04] [INFO] ============================================================
[2025-11-22 13:22:04] [INFO] 开始执行迁移流程
[2025-11-22 13:22:04] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_132204.log
[2025-11-22 13:22:04] [INFO] ============================================================
[2025-11-22 13:22:04] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:22:04] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 13:22:04] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:22:04] [INFO] 从GitHub同步服务器列表...
[2025-11-22 13:22:04] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:22:04] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:22:04] [INFO] 服务器列表已保存
[2025-11-22 13:22:04] [INFO] 自动选择目标服务器...
[2025-11-22 13:22:04] [INFO] 找到 1 个可用服务器
[2025-11-22 13:22:04] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 13:22:04] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 13:22:04] [INFO] 目标剩余时间: 14 天
[2025-11-22 13:22:04] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 13:22:04] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 13:22:04] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:22:05] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:22:05] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:22:07] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:22:07] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 13:22:07] [INFO] 迁移开始时间: 2025-11-22 13:22:07
[2025-11-22 13:22:08] [INFO] ============================================================
[2025-11-22 13:22:08] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 13:22:08] [INFO] ============================================================
[2025-11-22 13:22:08] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:22:10] [INFO] SSH连接测试成功
[2025-11-22 13:22:10] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 13:22:13] [INFO] SSH密钥配置成功
[2025-11-22 13:22:13] [INFO] 在目标服务器备份关键文件...
[2025-11-22 13:22:23] [INFO] 关键文件备份完成
[2025-11-22 13:22:23] [INFO] ============================================================
[2025-11-22 13:22:23] [INFO] 开始Rsync系统文件同步...
[2025-11-22 13:22:23] [INFO] ============================================================
[2025-11-22 13:22:23] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 13:22:23] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 13:22:23] [INFO] ------------------------------------------------------------
[2025-11-22 13:24:05] [INFO] ------------------------------------------------------------
[2025-11-22 13:24:05] [INFO] 传输统计: 共处理 458 个文件/目录
[2025-11-22 13:24:05] [INFO] ✅ Rsync同步完成 (耗时: 102.10秒)
[2025-11-22 13:24:05] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 13:24:05] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 13:24:10] [INFO] SSH密钥配置成功
[2025-11-22 13:24:10] [INFO] 恢复目标服务器网络配置...
[2025-11-22 13:24:19] [INFO] 网络配置恢复完成
[2025-11-22 13:24:19] [INFO] ============================================================
[2025-11-22 13:24:19] [INFO] ✅ 迁移完成！
[2025-11-22 13:24:19] [INFO] ============================================================
[2025-11-22 13:24:19] [INFO] ============================================================
[2025-11-22 13:24:19] [INFO] 开始初始化目标服务器
[2025-11-22 13:24:19] [INFO] 目标IP: 104.248.191.16
[2025-11-22 13:24:19] [INFO] 目标剩余天数: 14
[2025-11-22 13:24:19] [INFO] ============================================================
[2025-11-22 13:24:19] [INFO] 同步配置文件到目标服务器...
[2025-11-22 13:24:22] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 13:24:25] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 13:24:25] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 13:24:28] [INFO] ✅ 生命周期信息已更新
[2025-11-22 13:24:28] [INFO] 配置目标服务器systemd服务...
[2025-11-22 13:24:34] [INFO] ✅ Systemd服务配置完成
[2025-11-22 13:24:34] [INFO] 创建迁移标记文件...
[2025-11-22 13:24:37] [INFO] ✅ 迁移标记已创建
[2025-11-22 13:24:37] [INFO] 准备重启目标服务器...
[2025-11-22 13:24:39] [INFO] ✅ 重启命令已发送
[2025-11-22 13:24:39] [INFO] ⏳ 等待服务器重启...
[2025-11-22 13:24:49] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 13:24:49] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:24:49] [ERROR] SSH连接失败: Connection closed by 104.248.191.16 port 22

[2025-11-22 13:24:59] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:24:59] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 13:25:09] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:25:12] [INFO] SSH连接测试成功
[2025-11-22 13:25:12] [INFO] ✅ 目标服务器已上线 (耗时: 23秒)
[2025-11-22 13:25:12] [INFO] 验证目标服务器服务状态...
[2025-11-22 13:25:14] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 13:25:16] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 13:25:16] [INFO] ============================================================
[2025-11-22 13:25:16] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 13:25:16] [INFO] ============================================================
[2025-11-22 13:25:16] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 13:25:16] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 13:25:16] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 13:25:16] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 13:25:16] [INFO] ✅ DNS已更新
[2025-11-22 13:25:16] [INFO] 更新服务器状态...
[2025-11-22 13:25:16] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:25:17] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:25:17] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 13:25:17] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:25:18] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:25:18] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 13:25:18] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:25:19] [INFO] ✅ 成功拉取服务器列表 (1 个服务器)
[2025-11-22 13:25:19] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:25:20] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:25:20] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 13:25:21] [INFO] ============================================================
[2025-11-22 13:25:21] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 13:25:21] [INFO] ============================================================
[2025-11-22 13:25:21] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 13:25:21] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 13:25:21] [INFO] 迁移开始时间: 2025-11-22 13:22:07
[2025-11-22 13:25:21] [INFO] 迁移结束时间: 2025-11-22 13:25:20
[2025-11-22 13:25:21] [INFO] 总耗时: 193.69秒 (3.2分钟)
[2025-11-22 13:25:21] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_132204.log
[2025-11-22 13:25:21] [INFO] ============================================================
[2025-11-22 13:25:21] [INFO] ============================================================
[2025-11-22 13:25:21] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 13:25:21] [INFO] ============================================================
[2025-11-22 13:25:21] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 13:44:35] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:44:35] [INFO] CloudFlare API已初始化
[2025-11-22 13:44:35] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:44:35] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:44:35] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 13:44:35] [INFO] 服务器列表已保存
[2025-11-22 13:44:35] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 13:44:35] [INFO] ✅ 已从本地列表删除
[2025-11-22 13:44:35] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:44:36] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:44:36] [INFO] ✅ 已同步到GitHub
[2025-11-22 13:44:45] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:44:45] [INFO] CloudFlare API已初始化
[2025-11-22 13:44:45] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:44:45] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:44:45] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 13:44:45] [INFO] 服务器列表已保存
[2025-11-22 13:44:45] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 13:44:45] [INFO] ✅ 已添加到本地列表
[2025-11-22 13:44:45] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:44:47] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:44:47] [INFO] ✅ 已同步到GitHub
[2025-11-22 13:45:28] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:45:28] [INFO] CloudFlare API已初始化
[2025-11-22 13:45:28] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:45:28] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:45:28] [INFO] 添加新服务器: 159.65.104.203
[2025-11-22 13:45:28] [INFO] 服务器列表已保存
[2025-11-22 13:45:28] [INFO] 已添加新服务器: 159.65.104.203
[2025-11-22 13:45:28] [INFO] ✅ 已添加到本地列表
[2025-11-22 13:45:28] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:45:30] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:45:30] [INFO] ✅ 已同步到GitHub
[2025-11-22 13:46:46] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:46:46] [INFO] CloudFlare API已初始化
[2025-11-22 13:46:46] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:46:46] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:46:46] [INFO] ============================================================
[2025-11-22 13:46:46] [INFO] 初始化 Hermit Crab
[2025-11-22 13:46:46] [INFO] ============================================================
[2025-11-22 13:46:46] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 13:46:46] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 13:46:46] [INFO] ✅ 初始化完成
[2025-11-22 13:46:46] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 13:46:46] [INFO] ============================================================
[2025-11-22 13:46:46] [INFO] Hermit Crab 服务器状态
[2025-11-22 13:46:46] [INFO] ============================================================
[2025-11-22 13:46:46] [INFO] 状态: ✅ HEALTHY
[2025-11-22 13:46:46] [INFO] 当前IP: 170.64.226.135
[2025-11-22 13:46:46] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 13:46:46] [INFO] 添加日期: 2025-11-22
[2025-11-22 13:46:46] [INFO] 过期日期: 2025-12-07
[2025-11-22 13:46:46] [INFO] 剩余天数: 14 天
[2025-11-22 13:46:46] [INFO] 迁移次数: 0
[2025-11-22 13:46:46] [INFO] 需要迁移: 否
[2025-11-22 13:46:46] [INFO] ============================================================
[2025-11-22 13:48:04] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:48:04] [INFO] CloudFlare API已初始化
[2025-11-22 13:48:04] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:48:04] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:48:04] [INFO] ============================================================
[2025-11-22 13:48:04] [INFO] 启动自动迁移
[2025-11-22 13:48:04] [INFO] ============================================================
[2025-11-22 13:48:04] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 13:48:05] [INFO] ✅ 自动迁移已启动
[2025-11-22 13:48:05] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 13:48:05] [INFO] ============================================================
[2025-11-22 13:48:05] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 13:48:05] [INFO] CloudFlare API已初始化
[2025-11-22 13:48:05] [INFO] Hermit Crab Agent 已启动
[2025-11-22 13:48:05] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 13:48:05] [INFO] ============================================================
[2025-11-22 13:48:05] [INFO] Hermit Crab 守护进程启动
[2025-11-22 13:48:05] [INFO] ============================================================
[2025-11-22 13:48:05] [INFO] 
[2025-11-22 13:48:05] 执行检查...
[2025-11-22 13:48:05] [INFO] ============================================================
[2025-11-22 13:48:05] [INFO] 执行迁移检查
[2025-11-22 13:48:05] [INFO] ============================================================
[2025-11-22 13:48:05] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:48:05] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:48:05] [WARNING] 🚨 需要执行迁移！
[2025-11-22 13:48:07] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 13:48:07] [INFO] ============================================================
[2025-11-22 13:48:07] [INFO] 开始执行迁移流程
[2025-11-22 13:48:07] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_134807.log
[2025-11-22 13:48:07] [INFO] ============================================================
[2025-11-22 13:48:07] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 13:48:07] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 13:48:07] [INFO] 当前服务器剩余: 4 天
[2025-11-22 13:48:07] [INFO] 从GitHub同步服务器列表...
[2025-11-22 13:48:07] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:48:07] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 13:48:07] [INFO] 服务器列表已保存
[2025-11-22 13:48:07] [INFO] 自动选择目标服务器...
[2025-11-22 13:48:07] [INFO] 找到 2 个可用服务器
[2025-11-22 13:48:07] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 13:48:07] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 13:48:07] [INFO] 目标剩余时间: 14 天
[2025-11-22 13:48:07] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 13:48:07] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 13:48:07] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:48:08] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 13:48:08] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:48:09] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:48:09] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 13:48:10] [INFO] 迁移开始时间: 2025-11-22 13:48:09
[2025-11-22 13:48:11] [INFO] ============================================================
[2025-11-22 13:48:11] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 13:48:11] [INFO] ============================================================
[2025-11-22 13:48:11] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:48:13] [INFO] SSH连接测试成功
[2025-11-22 13:48:13] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 13:48:18] [INFO] SSH密钥配置成功
[2025-11-22 13:48:18] [INFO] 在目标服务器备份关键文件...
[2025-11-22 13:48:28] [INFO] 关键文件备份完成
[2025-11-22 13:48:28] [INFO] ============================================================
[2025-11-22 13:48:28] [INFO] 开始Rsync系统文件同步...
[2025-11-22 13:48:28] [INFO] ============================================================
[2025-11-22 13:48:28] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 13:48:28] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 13:48:28] [INFO] ------------------------------------------------------------
[2025-11-22 13:54:19] [INFO] ------------------------------------------------------------
[2025-11-22 13:54:19] [INFO] 传输统计: 共处理 1229721 个文件/目录
[2025-11-22 13:54:19] [INFO] ✅ Rsync同步完成 (耗时: 351.76秒)
[2025-11-22 13:54:19] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 13:54:19] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 13:54:25] [INFO] SSH密钥配置成功
[2025-11-22 13:54:25] [INFO] 恢复目标服务器网络配置...
[2025-11-22 13:54:33] [INFO] 网络配置恢复完成
[2025-11-22 13:54:33] [INFO] ============================================================
[2025-11-22 13:54:33] [INFO] ✅ 迁移完成！
[2025-11-22 13:54:33] [INFO] ============================================================
[2025-11-22 13:54:33] [INFO] ============================================================
[2025-11-22 13:54:33] [INFO] 开始初始化目标服务器
[2025-11-22 13:54:33] [INFO] 目标IP: 104.248.191.16
[2025-11-22 13:54:33] [INFO] 目标剩余天数: 14
[2025-11-22 13:54:33] [INFO] ============================================================
[2025-11-22 13:54:33] [INFO] 同步配置文件到目标服务器...
[2025-11-22 13:54:37] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 13:54:40] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 13:54:40] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 13:54:43] [INFO] ✅ 生命周期信息已更新
[2025-11-22 13:54:43] [INFO] 配置目标服务器systemd服务...
[2025-11-22 13:54:49] [INFO] ✅ Systemd服务配置完成
[2025-11-22 13:54:49] [INFO] 创建迁移标记文件...
[2025-11-22 13:54:52] [INFO] ✅ 迁移标记已创建
[2025-11-22 13:54:52] [INFO] 准备重启目标服务器...
[2025-11-22 13:54:54] [INFO] ✅ 重启命令已发送
[2025-11-22 13:54:54] [INFO] ⏳ 等待服务器重启...
[2025-11-22 13:55:04] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 13:55:04] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:55:08] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 13:55:18] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 13:55:20] [INFO] SSH连接测试成功
[2025-11-22 13:55:20] [INFO] ✅ 目标服务器已上线 (耗时: 16秒)
[2025-11-22 13:55:20] [INFO] 验证目标服务器服务状态...
[2025-11-22 13:55:22] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 13:55:24] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 13:55:24] [INFO] ============================================================
[2025-11-22 13:55:24] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 13:55:24] [INFO] ============================================================
[2025-11-22 13:55:24] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 13:55:24] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 13:55:25] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 13:55:25] [INFO] DNS记录IP未变化: 104.248.191.16
[2025-11-22 13:55:25] [INFO] ✅ DNS已更新
[2025-11-22 13:55:25] [INFO] 更新服务器状态...
[2025-11-22 13:55:25] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:55:25] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 13:55:25] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 13:55:25] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:55:27] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:55:27] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 13:55:27] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 13:55:27] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 13:55:27] [INFO] 推送服务器列表到GitHub...
[2025-11-22 13:55:29] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 13:55:29] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 13:55:30] [INFO] ============================================================
[2025-11-22 13:55:30] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 13:55:30] [INFO] ============================================================
[2025-11-22 13:55:30] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 13:55:30] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 13:55:30] [INFO] 迁移开始时间: 2025-11-22 13:48:09
[2025-11-22 13:55:30] [INFO] 迁移结束时间: 2025-11-22 13:55:29
[2025-11-22 13:55:30] [INFO] 总耗时: 439.42秒 (7.3分钟)
[2025-11-22 13:55:30] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_134807.log
[2025-11-22 13:55:30] [INFO] ============================================================
[2025-11-22 13:55:30] [INFO] ============================================================
[2025-11-22 13:55:30] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 13:55:30] [INFO] ============================================================
[2025-11-22 13:55:30] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 14:09:59] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:09:59] [INFO] CloudFlare API已初始化
[2025-11-22 14:09:59] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:09:59] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:09:59] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] Hermit Crab 服务器状态
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] 状态: 🚨 CRITICAL
[2025-11-22 14:09:59] [INFO] 当前IP: 170.64.226.135
[2025-11-22 14:09:59] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 14:09:59] [INFO] 添加日期: 2025-11-12
[2025-11-22 14:09:59] [INFO] 过期日期: 2025-11-27
[2025-11-22 14:09:59] [INFO] 剩余天数: 4 天
[2025-11-22 14:09:59] [INFO] 迁移次数: 1
[2025-11-22 14:09:59] [INFO] 需要迁移: 是
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] 自动迁移状态
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] 状态: ❌ 未启动
[2025-11-22 14:09:59] [INFO] 说明: 需要手动执行迁移
[2025-11-22 14:09:59] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 14:09:59] [INFO] ============================================================
[2025-11-22 14:09:59] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 14:09:59] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:10:00] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:10:00] [INFO] 服务器列表已保存
[2025-11-22 14:10:00] [INFO] 
可用服务器列表:
[2025-11-22 14:10:00] [INFO] ================================================================================
[2025-11-22 14:10:00] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 14:10:00] [INFO] ================================================================================
[2025-11-22 14:10:00] [INFO] 104.248.191.16     14           active                                     
[2025-11-22 14:10:00] [INFO] 159.65.104.203     14           idle                                       
[2025-11-22 14:10:00] [INFO] ================================================================================
[2025-11-22 14:12:30] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:12:30] [INFO] CloudFlare API已初始化
[2025-11-22 14:12:30] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:12:30] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:12:30] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] Hermit Crab 服务器状态
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] 状态: 🚨 CRITICAL
[2025-11-22 14:12:30] [INFO] 当前IP: 170.64.226.135
[2025-11-22 14:12:30] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 14:12:30] [INFO] 添加日期: 2025-11-12
[2025-11-22 14:12:30] [INFO] 过期日期: 2025-11-27
[2025-11-22 14:12:30] [INFO] 剩余天数: 4 天
[2025-11-22 14:12:30] [INFO] 迁移次数: 1
[2025-11-22 14:12:30] [INFO] 需要迁移: 是
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] 自动迁移状态
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] 状态: ❌ 未启动
[2025-11-22 14:12:30] [INFO] 说明: 需要手动执行迁移
[2025-11-22 14:12:30] [INFO] 提示: 使用 'hermit-crab start' 启动自动迁移
[2025-11-22 14:12:30] [INFO] ============================================================
[2025-11-22 14:12:30] [INFO] 
正在从GitHub同步服务器列表...
[2025-11-22 14:12:30] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:12:31] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:12:31] [INFO] 服务器列表已保存
[2025-11-22 14:12:31] [INFO] 
可用服务器列表:
[2025-11-22 14:12:31] [INFO] ================================================================================
[2025-11-22 14:12:31] [INFO] IP地址               剩余天数         状态           备注                            
[2025-11-22 14:12:31] [INFO] ================================================================================
[2025-11-22 14:12:31] [INFO] 104.248.191.16     14           active                                     
[2025-11-22 14:12:31] [INFO] 159.65.104.203     14           idle                                       
[2025-11-22 14:12:31] [INFO] ================================================================================
[2025-11-22 14:23:22] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:23:22] [INFO] CloudFlare API已初始化
[2025-11-22 14:23:22] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:23:22] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:23:22] [INFO] ============================================================
[2025-11-22 14:23:22] [INFO] 更新生命周期（保留迁移历史）
[2025-11-22 14:23:22] [INFO] ============================================================
[2025-11-22 14:23:22] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 14:23:22] [INFO] 从GitHub同步服务器列表...
[2025-11-22 14:23:22] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:23:22] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:23:22] [INFO] 服务器列表已保存
[2025-11-22 14:23:22] [ERROR] ❌ 未找到当前服务器信息: 170.64.226.135
[2025-11-22 14:31:14] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:31:14] [INFO] CloudFlare API已初始化
[2025-11-22 14:31:14] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:31:14] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:31:14] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 14:31:14] [INFO] 服务器列表已保存
[2025-11-22 14:31:14] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 14:31:14] [INFO] ✅ 已从本地列表删除
[2025-11-22 14:31:14] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:31:15] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:31:15] [INFO] ✅ 已同步到GitHub
[2025-11-22 14:31:31] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:31:31] [INFO] CloudFlare API已初始化
[2025-11-22 14:31:31] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:31:31] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:31:31] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 14:31:31] [INFO] 服务器列表已保存
[2025-11-22 14:31:31] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 14:31:31] [INFO] ✅ 已添加到本地列表
[2025-11-22 14:31:31] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:31:32] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:31:32] [INFO] ✅ 已同步到GitHub
[2025-11-22 14:32:19] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:32:19] [INFO] CloudFlare API已初始化
[2025-11-22 14:32:19] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:32:19] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:32:19] [INFO] ============================================================
[2025-11-22 14:32:19] [INFO] 初始化 Hermit Crab
[2025-11-22 14:32:19] [INFO] ============================================================
[2025-11-22 14:32:20] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 14:32:20] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 14:32:20] [INFO] ✅ 初始化完成
[2025-11-22 14:32:20] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 14:32:20] [INFO] ============================================================
[2025-11-22 14:32:20] [INFO] Hermit Crab 服务器状态
[2025-11-22 14:32:20] [INFO] ============================================================
[2025-11-22 14:32:20] [INFO] 状态: ✅ HEALTHY
[2025-11-22 14:32:20] [INFO] 当前IP: 170.64.226.135
[2025-11-22 14:32:20] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 14:32:20] [INFO] 添加日期: 2025-11-22
[2025-11-22 14:32:20] [INFO] 过期日期: 2025-12-07
[2025-11-22 14:32:20] [INFO] 剩余天数: 14 天
[2025-11-22 14:32:20] [INFO] 迁移次数: 0
[2025-11-22 14:32:20] [INFO] 需要迁移: 否
[2025-11-22 14:32:20] [INFO] ============================================================
[2025-11-22 14:32:56] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:32:56] [INFO] CloudFlare API已初始化
[2025-11-22 14:32:56] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:32:56] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:32:56] [INFO] ============================================================
[2025-11-22 14:32:56] [INFO] 启动自动迁移
[2025-11-22 14:32:56] [INFO] ============================================================
[2025-11-22 14:32:56] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 14:32:56] [INFO] ✅ 自动迁移已启动
[2025-11-22 14:32:56] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 14:32:56] [INFO] ============================================================
[2025-11-22 14:32:57] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:32:57] [INFO] CloudFlare API已初始化
[2025-11-22 14:32:57] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:32:57] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:32:57] [INFO] ============================================================
[2025-11-22 14:32:57] [INFO] Hermit Crab 守护进程启动
[2025-11-22 14:32:57] [INFO] ============================================================
[2025-11-22 14:32:57] [INFO] 
[2025-11-22 14:32:57] 执行检查...
[2025-11-22 14:32:57] [INFO] ============================================================
[2025-11-22 14:32:57] [INFO] 执行迁移检查
[2025-11-22 14:32:57] [INFO] ============================================================
[2025-11-22 14:32:57] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 14:32:57] [INFO] 当前服务器剩余: 14 天
[2025-11-22 14:32:57] [INFO] ✅ 暂不需要迁移
[2025-11-22 14:32:57] [INFO] 下次检查时间: 3600秒后
[2025-11-22 14:34:12] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:34:12] [INFO] CloudFlare API已初始化
[2025-11-22 14:34:12] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:34:12] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:34:12] [INFO] ============================================================
[2025-11-22 14:34:12] [INFO] 启动自动迁移
[2025-11-22 14:34:12] [INFO] ============================================================
[2025-11-22 14:34:12] [INFO] ✅ 自动迁移已在运行中
[2025-11-22 14:34:22] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:34:22] [INFO] CloudFlare API已初始化
[2025-11-22 14:34:22] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:34:22] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:34:22] [INFO] ============================================================
[2025-11-22 14:34:22] [INFO] 停止自动迁移
[2025-11-22 14:34:22] [INFO] ============================================================
[2025-11-22 14:34:22] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 14:34:23] [INFO] ✅ 自动迁移已停止
[2025-11-22 14:34:23] [INFO] 需要手动执行 'hermit-crab migrate' 进行迁移
[2025-11-22 14:34:23] [INFO] ============================================================
[2025-11-22 14:34:47] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:34:47] [INFO] CloudFlare API已初始化
[2025-11-22 14:34:47] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:34:47] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:34:47] [INFO] ============================================================
[2025-11-22 14:34:47] [INFO] 启动自动迁移
[2025-11-22 14:34:47] [INFO] ============================================================
[2025-11-22 14:34:47] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 14:34:48] [INFO] ✅ 自动迁移已启动
[2025-11-22 14:34:48] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 14:34:48] [INFO] ============================================================
[2025-11-22 14:34:48] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:34:48] [INFO] CloudFlare API已初始化
[2025-11-22 14:34:48] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:34:48] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:34:48] [INFO] ============================================================
[2025-11-22 14:34:48] [INFO] Hermit Crab 守护进程启动
[2025-11-22 14:34:48] [INFO] ============================================================
[2025-11-22 14:34:48] [INFO] 
[2025-11-22 14:34:48] 执行检查...
[2025-11-22 14:34:48] [INFO] ============================================================
[2025-11-22 14:34:48] [INFO] 执行迁移检查
[2025-11-22 14:34:48] [INFO] ============================================================
[2025-11-22 14:34:48] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:34:48] [INFO] 当前服务器剩余: 4 天
[2025-11-22 14:34:48] [WARNING] 🚨 需要执行迁移！
[2025-11-22 14:34:49] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 14:34:49] [INFO] ============================================================
[2025-11-22 14:34:49] [INFO] 开始执行迁移流程
[2025-11-22 14:34:49] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_143449.log
[2025-11-22 14:34:49] [INFO] ============================================================
[2025-11-22 14:34:49] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:34:49] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 14:34:49] [INFO] 当前服务器剩余: 4 天
[2025-11-22 14:34:49] [INFO] 从GitHub同步服务器列表...
[2025-11-22 14:34:49] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:34:50] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:34:50] [INFO] 服务器列表已保存
[2025-11-22 14:34:50] [INFO] 自动选择目标服务器...
[2025-11-22 14:34:50] [INFO] 找到 2 个可用服务器
[2025-11-22 14:34:50] [INFO] 选择高优先级服务器: 159.65.104.203 (剩余 14 天)
[2025-11-22 14:34:50] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 14:34:50] [INFO] 目标剩余时间: 14 天
[2025-11-22 14:34:50] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 14:34:50] [INFO] 尝试获取服务器锁: 159.65.104.203
[2025-11-22 14:34:50] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:34:50] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:34:50] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:34:52] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:34:52] [INFO] ✅ 成功获取服务器锁: 159.65.104.203
[2025-11-22 14:34:52] [INFO] 迁移开始时间: 2025-11-22 14:34:52
[2025-11-22 14:34:52] [INFO] ============================================================
[2025-11-22 14:34:52] [INFO] 开始迁移到目标服务器: 159.65.104.203
[2025-11-22 14:34:52] [INFO] ============================================================
[2025-11-22 14:34:52] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 14:34:54] [INFO] SSH连接测试成功
[2025-11-22 14:34:54] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 14:34:59] [INFO] SSH密钥配置成功
[2025-11-22 14:34:59] [INFO] 在目标服务器备份关键文件...
[2025-11-22 14:35:09] [INFO] 关键文件备份完成
[2025-11-22 14:35:09] [INFO] ============================================================
[2025-11-22 14:35:09] [INFO] 开始Rsync系统文件同步...
[2025-11-22 14:35:09] [INFO] ============================================================
[2025-11-22 14:35:09] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@159.65.104.203:/
[2025-11-22 14:35:09] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 14:35:09] [INFO] ------------------------------------------------------------
[2025-11-22 14:41:01] [INFO] ------------------------------------------------------------
[2025-11-22 14:41:01] [INFO] 传输统计: 共处理 1229854 个文件/目录
[2025-11-22 14:41:01] [INFO] ✅ Rsync同步完成 (耗时: 351.62秒)
[2025-11-22 14:41:01] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 14:41:01] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 14:41:06] [INFO] SSH密钥配置成功
[2025-11-22 14:41:06] [INFO] 恢复目标服务器网络配置...
[2025-11-22 14:41:15] [INFO] 网络配置恢复完成
[2025-11-22 14:41:15] [INFO] ============================================================
[2025-11-22 14:41:15] [INFO] ✅ 迁移完成！
[2025-11-22 14:41:15] [INFO] ============================================================
[2025-11-22 14:41:15] [INFO] ============================================================
[2025-11-22 14:41:15] [INFO] 开始初始化目标服务器
[2025-11-22 14:41:15] [INFO] 目标IP: 159.65.104.203
[2025-11-22 14:41:15] [INFO] 目标剩余天数: 14
[2025-11-22 14:41:15] [INFO] ============================================================
[2025-11-22 14:41:15] [INFO] 同步配置文件到目标服务器...
[2025-11-22 14:41:18] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 14:41:21] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 14:41:21] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 14:41:21] [INFO] 读取源服务器lifecycle，包含 0 条迁移历史
[2025-11-22 14:41:23] [ERROR] ❌ 更新生命周期失败: usage: agent.py [-h]
                {init,update-lifecycle,status,check,migrate,feedback,daemon,start,stop,list,add,remove} ...
agent.py: error: unrecognized arguments: 2025-11-12, total_days: 15, current_ip: 170.64.226.135, current_domain: a.ssfxx.com, initialized_at: 2025-11-12T14:32:20.023624, migration_history: []}

[2025-11-22 14:41:23] [ERROR] ❌ 目标服务器初始化失败
[2025-11-22 14:41:23] [WARNING] ⚠️  迁移主体完成但初始化失败，需要手动完成初始化
[2025-11-22 14:41:23] [INFO] 更新DNS: a -> 159.65.104.203
[2025-11-22 14:41:23] [INFO] 更新域名解析: a.ssfxx.com -> 159.65.104.203
[2025-11-22 14:41:24] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 14:41:24] [INFO] ✅ DNS记录已更新: a.ssfxx.com 104.248.191.16 -> 159.65.104.203
[2025-11-22 14:41:24] [INFO] ✅ DNS已更新
[2025-11-22 14:41:24] [INFO] 更新服务器状态...
[2025-11-22 14:41:24] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:41:25] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:41:25] [INFO] 服务器 159.65.104.203 状态已更新: active
[2025-11-22 14:41:25] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:41:26] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:41:26] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 14:41:26] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:41:27] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:41:27] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:41:28] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:41:28] [INFO] 迁移记录已添加: 159.65.104.203
[2025-11-22 14:41:29] [INFO] ============================================================
[2025-11-22 14:41:29] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 14:41:29] [INFO] ============================================================
[2025-11-22 14:41:29] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 14:41:29] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 14:41:29] [INFO] 迁移开始时间: 2025-11-22 14:34:52
[2025-11-22 14:41:29] [INFO] 迁移结束时间: 2025-11-22 14:41:28
[2025-11-22 14:41:29] [INFO] 总耗时: 396.52秒 (6.6分钟)
[2025-11-22 14:41:29] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_143449.log
[2025-11-22 14:41:29] [INFO] ============================================================
[2025-11-22 14:41:29] [INFO] ============================================================
[2025-11-22 14:41:29] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 14:41:29] [INFO] ============================================================
[2025-11-22 14:41:29] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 14:47:47] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:47:47] [INFO] CloudFlare API已初始化
[2025-11-22 14:47:47] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:47:47] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:47:47] [INFO] ============================================================
[2025-11-22 14:47:47] [INFO] 更新生命周期（保留迁移历史）
[2025-11-22 14:47:47] [INFO] ============================================================
[2025-11-22 14:47:47] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 14:47:47] [INFO] 从GitHub同步服务器列表...
[2025-11-22 14:47:47] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:47:47] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:47:47] [INFO] 服务器列表已保存
[2025-11-22 14:47:47] [ERROR] ❌ 未找到当前服务器信息: 170.64.226.135
[2025-11-22 14:49:30] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:49:30] [INFO] CloudFlare API已初始化
[2025-11-22 14:49:30] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:49:30] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:49:30] [INFO] ============================================================
[2025-11-22 14:49:30] [INFO] 停止自动迁移
[2025-11-22 14:49:30] [INFO] ============================================================
[2025-11-22 14:49:30] [INFO] ✅ 自动迁移未在运行
[2025-11-22 14:49:53] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:49:53] [INFO] CloudFlare API已初始化
[2025-11-22 14:49:53] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:49:53] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:49:53] [INFO] 删除服务器: 159.65.104.203
[2025-11-22 14:49:53] [INFO] 服务器列表已保存
[2025-11-22 14:49:53] [INFO] ✅ 已删除服务器: 159.65.104.203
[2025-11-22 14:49:53] [INFO] ✅ 已从本地列表删除
[2025-11-22 14:49:53] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:49:54] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:49:54] [INFO] ✅ 已同步到GitHub
[2025-11-22 14:50:09] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:50:09] [INFO] CloudFlare API已初始化
[2025-11-22 14:50:09] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:50:09] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:50:09] [INFO] 添加新服务器: 159.65.104.203
[2025-11-22 14:50:09] [INFO] 服务器列表已保存
[2025-11-22 14:50:09] [INFO] 已添加新服务器: 159.65.104.203
[2025-11-22 14:50:09] [INFO] ✅ 已添加到本地列表
[2025-11-22 14:50:09] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:50:10] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:50:10] [INFO] ✅ 已同步到GitHub
[2025-11-22 14:50:20] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:50:20] [INFO] CloudFlare API已初始化
[2025-11-22 14:50:20] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:50:20] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:50:20] [INFO] ============================================================
[2025-11-22 14:50:20] [INFO] 初始化 Hermit Crab
[2025-11-22 14:50:20] [INFO] ============================================================
[2025-11-22 14:50:20] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 14:50:20] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 14:50:20] [INFO] ✅ 初始化完成
[2025-11-22 14:50:20] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 14:50:20] [INFO] ============================================================
[2025-11-22 14:50:20] [INFO] Hermit Crab 服务器状态
[2025-11-22 14:50:20] [INFO] ============================================================
[2025-11-22 14:50:20] [INFO] 状态: ✅ HEALTHY
[2025-11-22 14:50:20] [INFO] 当前IP: 170.64.226.135
[2025-11-22 14:50:20] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 14:50:20] [INFO] 添加日期: 2025-11-22
[2025-11-22 14:50:20] [INFO] 过期日期: 2025-12-07
[2025-11-22 14:50:20] [INFO] 剩余天数: 14 天
[2025-11-22 14:50:20] [INFO] 迁移次数: 0
[2025-11-22 14:50:20] [INFO] 需要迁移: 否
[2025-11-22 14:50:20] [INFO] ============================================================
[2025-11-22 14:52:02] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:52:02] [INFO] CloudFlare API已初始化
[2025-11-22 14:52:02] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:52:02] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:52:02] [INFO] ============================================================
[2025-11-22 14:52:02] [INFO] 启动自动迁移
[2025-11-22 14:52:02] [INFO] ============================================================
[2025-11-22 14:52:02] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 14:52:03] [INFO] ✅ 自动迁移已启动
[2025-11-22 14:52:03] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 14:52:03] [INFO] ============================================================
[2025-11-22 14:52:04] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 14:52:04] [INFO] CloudFlare API已初始化
[2025-11-22 14:52:04] [INFO] Hermit Crab Agent 已启动
[2025-11-22 14:52:04] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [INFO] Hermit Crab 守护进程启动
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [INFO] 
[2025-11-22 14:52:04] 执行检查...
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [INFO] 执行迁移检查
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:52:04] [INFO] 当前服务器剩余: 4 天
[2025-11-22 14:52:04] [WARNING] 🚨 需要执行迁移！
[2025-11-22 14:52:04] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [INFO] 开始执行迁移流程
[2025-11-22 14:52:04] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_145204.log
[2025-11-22 14:52:04] [INFO] ============================================================
[2025-11-22 14:52:04] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 14:52:04] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 14:52:04] [INFO] 当前服务器剩余: 4 天
[2025-11-22 14:52:04] [INFO] 从GitHub同步服务器列表...
[2025-11-22 14:52:04] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:52:05] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:52:05] [INFO] 服务器列表已保存
[2025-11-22 14:52:05] [INFO] 自动选择目标服务器...
[2025-11-22 14:52:05] [INFO] 找到 2 个可用服务器
[2025-11-22 14:52:05] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 14:52:05] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 14:52:05] [INFO] 目标剩余时间: 14 天
[2025-11-22 14:52:05] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 14:52:05] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 14:52:05] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:52:05] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:52:05] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:52:07] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:52:07] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 14:52:07] [INFO] 迁移开始时间: 2025-11-22 14:52:07
[2025-11-22 14:52:08] [INFO] ============================================================
[2025-11-22 14:52:08] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 14:52:08] [INFO] ============================================================
[2025-11-22 14:52:08] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 14:52:10] [INFO] SSH连接测试成功
[2025-11-22 14:52:10] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 14:52:13] [INFO] SSH密钥配置成功
[2025-11-22 14:52:13] [INFO] 在目标服务器备份关键文件...
[2025-11-22 14:52:23] [INFO] 关键文件备份完成
[2025-11-22 14:52:23] [INFO] ============================================================
[2025-11-22 14:52:23] [INFO] 开始Rsync系统文件同步...
[2025-11-22 14:52:23] [INFO] ============================================================
[2025-11-22 14:52:23] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 14:52:23] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 14:52:23] [INFO] ------------------------------------------------------------
[2025-11-22 14:54:11] [INFO] ------------------------------------------------------------
[2025-11-22 14:54:11] [INFO] 传输统计: 共处理 413 个文件/目录
[2025-11-22 14:54:11] [INFO] ✅ Rsync同步完成 (耗时: 107.85秒)
[2025-11-22 14:54:11] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 14:54:11] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 14:54:16] [INFO] SSH密钥配置成功
[2025-11-22 14:54:16] [INFO] 恢复目标服务器网络配置...
[2025-11-22 14:54:25] [INFO] 网络配置恢复完成
[2025-11-22 14:54:25] [INFO] ============================================================
[2025-11-22 14:54:25] [INFO] ✅ 迁移完成！
[2025-11-22 14:54:25] [INFO] ============================================================
[2025-11-22 14:54:25] [INFO] ============================================================
[2025-11-22 14:54:25] [INFO] 开始初始化目标服务器
[2025-11-22 14:54:25] [INFO] 目标IP: 104.248.191.16
[2025-11-22 14:54:25] [INFO] 目标剩余天数: 14
[2025-11-22 14:54:25] [INFO] ============================================================
[2025-11-22 14:54:25] [INFO] 同步配置文件到目标服务器...
[2025-11-22 14:54:28] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 14:54:31] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 14:54:31] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 14:54:31] [INFO] 读取源服务器lifecycle，包含 0 条迁移历史
[2025-11-22 14:54:34] [INFO] ✅ 生命周期信息已更新（保留迁移历史）
[2025-11-22 14:54:34] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 14:54:37] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 14:54:37] [INFO] 配置目标服务器systemd服务...
[2025-11-22 14:54:44] [INFO] ✅ Systemd服务配置完成
[2025-11-22 14:54:44] [INFO] 创建迁移标记文件...
[2025-11-22 14:54:46] [INFO] ✅ 迁移标记已创建
[2025-11-22 14:54:46] [INFO] 准备重启目标服务器...
[2025-11-22 14:54:48] [INFO] ✅ 重启命令已发送
[2025-11-22 14:54:48] [INFO] ⏳ 等待服务器重启...
[2025-11-22 14:54:58] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 14:54:58] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 14:55:00] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 14:55:10] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 14:55:12] [INFO] SSH连接测试成功
[2025-11-22 14:55:12] [INFO] ✅ 目标服务器已上线 (耗时: 14秒)
[2025-11-22 14:55:12] [INFO] 验证目标服务器服务状态...
[2025-11-22 14:55:14] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 14:55:17] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 14:55:17] [INFO] ============================================================
[2025-11-22 14:55:17] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 14:55:17] [INFO] ============================================================
[2025-11-22 14:55:17] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 14:55:17] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 14:55:17] [INFO] 找到DNS记录: a.ssfxx.com -> 159.65.104.203
[2025-11-22 14:55:18] [INFO] ✅ DNS记录已更新: a.ssfxx.com 159.65.104.203 -> 104.248.191.16
[2025-11-22 14:55:18] [INFO] ✅ DNS已更新
[2025-11-22 14:55:18] [INFO] 更新服务器状态...
[2025-11-22 14:55:18] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:55:18] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:55:18] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 14:55:18] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:55:20] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:55:20] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 14:55:20] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 14:55:20] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 14:55:20] [INFO] 推送服务器列表到GitHub...
[2025-11-22 14:55:22] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 14:55:22] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 14:55:22] [INFO] ============================================================
[2025-11-22 14:55:22] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 14:55:22] [INFO] ============================================================
[2025-11-22 14:55:22] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 14:55:22] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 14:55:22] [INFO] 迁移开始时间: 2025-11-22 14:52:07
[2025-11-22 14:55:22] [INFO] 迁移结束时间: 2025-11-22 14:55:22
[2025-11-22 14:55:22] [INFO] 总耗时: 194.89秒 (3.2分钟)
[2025-11-22 14:55:22] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_145204.log
[2025-11-22 14:55:22] [INFO] ============================================================
[2025-11-22 14:55:22] [INFO] ============================================================
[2025-11-22 14:55:22] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 14:55:22] [INFO] ============================================================
[2025-11-22 14:55:22] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 15:06:03] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:06:03] [INFO] CloudFlare API已初始化
[2025-11-22 15:06:03] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:06:03] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:06:03] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 15:06:03] [INFO] 服务器列表已保存
[2025-11-22 15:06:03] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 15:06:03] [INFO] ✅ 已从本地列表删除
[2025-11-22 15:06:03] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:06:05] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:06:05] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:06:10] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:06:10] [INFO] CloudFlare API已初始化
[2025-11-22 15:06:10] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:06:10] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:06:10] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 15:06:10] [INFO] 服务器列表已保存
[2025-11-22 15:06:10] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 15:06:10] [INFO] ✅ 已添加到本地列表
[2025-11-22 15:06:10] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:06:12] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:06:12] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:06:18] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:06:18] [INFO] CloudFlare API已初始化
[2025-11-22 15:06:18] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:06:18] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:06:18] [INFO] ============================================================
[2025-11-22 15:06:18] [INFO] 初始化 Hermit Crab
[2025-11-22 15:06:18] [INFO] ============================================================
[2025-11-22 15:06:18] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 15:06:18] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 15:06:18] [INFO] ✅ 初始化完成
[2025-11-22 15:06:18] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 15:06:18] [INFO] ============================================================
[2025-11-22 15:06:18] [INFO] Hermit Crab 服务器状态
[2025-11-22 15:06:18] [INFO] ============================================================
[2025-11-22 15:06:18] [INFO] 状态: ✅ HEALTHY
[2025-11-22 15:06:18] [INFO] 当前IP: 170.64.226.135
[2025-11-22 15:06:18] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 15:06:18] [INFO] 添加日期: 2025-11-22
[2025-11-22 15:06:18] [INFO] 过期日期: 2025-12-07
[2025-11-22 15:06:18] [INFO] 剩余天数: 14 天
[2025-11-22 15:06:18] [INFO] 迁移次数: 0
[2025-11-22 15:06:18] [INFO] 需要迁移: 否
[2025-11-22 15:06:18] [INFO] ============================================================
[2025-11-22 15:06:51] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:06:51] [INFO] CloudFlare API已初始化
[2025-11-22 15:06:51] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:06:51] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:06:51] [INFO] ============================================================
[2025-11-22 15:06:51] [INFO] 启动自动迁移
[2025-11-22 15:06:51] [INFO] ============================================================
[2025-11-22 15:06:51] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 15:06:52] [INFO] ✅ 自动迁移已启动
[2025-11-22 15:06:52] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 15:06:52] [INFO] ============================================================
[2025-11-22 15:06:53] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:06:53] [INFO] CloudFlare API已初始化
[2025-11-22 15:06:53] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:06:53] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [INFO] Hermit Crab 守护进程启动
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [INFO] 
[2025-11-22 15:06:53] 执行检查...
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [INFO] 执行迁移检查
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:06:53] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:06:53] [WARNING] 🚨 需要执行迁移！
[2025-11-22 15:06:53] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [INFO] 开始执行迁移流程
[2025-11-22 15:06:53] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_150653.log
[2025-11-22 15:06:53] [INFO] ============================================================
[2025-11-22 15:06:53] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:06:53] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 15:06:53] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:06:53] [INFO] 从GitHub同步服务器列表...
[2025-11-22 15:06:53] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:06:54] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:06:54] [INFO] 服务器列表已保存
[2025-11-22 15:06:54] [INFO] 自动选择目标服务器...
[2025-11-22 15:06:54] [INFO] 找到 2 个可用服务器
[2025-11-22 15:06:54] [INFO] 选择高优先级服务器: 159.65.104.203 (剩余 14 天)
[2025-11-22 15:06:54] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 15:06:54] [INFO] 目标剩余时间: 14 天
[2025-11-22 15:06:54] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 15:06:54] [INFO] 尝试获取服务器锁: 159.65.104.203
[2025-11-22 15:06:54] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:06:54] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:06:54] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:06:56] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:06:56] [INFO] ✅ 成功获取服务器锁: 159.65.104.203
[2025-11-22 15:06:56] [INFO] 迁移开始时间: 2025-11-22 15:06:56
[2025-11-22 15:06:56] [INFO] ============================================================
[2025-11-22 15:06:56] [INFO] 开始迁移到目标服务器: 159.65.104.203
[2025-11-22 15:06:56] [INFO] ============================================================
[2025-11-22 15:06:56] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:06:59] [INFO] SSH连接测试成功
[2025-11-22 15:06:59] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 15:07:02] [INFO] SSH密钥配置成功
[2025-11-22 15:07:02] [INFO] 在目标服务器备份关键文件...
[2025-11-22 15:07:12] [INFO] 关键文件备份完成
[2025-11-22 15:07:12] [INFO] ============================================================
[2025-11-22 15:07:12] [INFO] 开始Rsync系统文件同步...
[2025-11-22 15:07:12] [INFO] ============================================================
[2025-11-22 15:07:12] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@159.65.104.203:/
[2025-11-22 15:07:12] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 15:07:12] [INFO] ------------------------------------------------------------
[2025-11-22 15:08:47] [INFO] ------------------------------------------------------------
[2025-11-22 15:08:47] [INFO] 传输统计: 共处理 248 个文件/目录
[2025-11-22 15:08:47] [INFO] ✅ Rsync同步完成 (耗时: 95.24秒)
[2025-11-22 15:08:47] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 15:08:47] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 15:08:52] [INFO] SSH密钥配置成功
[2025-11-22 15:08:52] [INFO] 恢复目标服务器网络配置...
[2025-11-22 15:09:01] [INFO] 网络配置恢复完成
[2025-11-22 15:09:01] [INFO] ============================================================
[2025-11-22 15:09:01] [INFO] ✅ 迁移完成！
[2025-11-22 15:09:01] [INFO] ============================================================
[2025-11-22 15:09:01] [INFO] 迁移记录已添加: 159.65.104.203
[2025-11-22 15:09:01] [INFO] ============================================================
[2025-11-22 15:09:01] [INFO] 开始初始化目标服务器
[2025-11-22 15:09:01] [INFO] 目标IP: 159.65.104.203
[2025-11-22 15:09:01] [INFO] 目标剩余天数: 14
[2025-11-22 15:09:01] [INFO] ============================================================
[2025-11-22 15:09:01] [INFO] 同步配置文件到目标服务器...
[2025-11-22 15:09:04] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 15:09:07] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 15:09:07] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 15:09:07] [INFO] 读取源服务器lifecycle，包含 1 条迁移历史
[2025-11-22 15:09:10] [INFO] ✅ 生命周期信息已更新（保留迁移历史）
[2025-11-22 15:09:10] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:09:13] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:09:13] [INFO] 配置目标服务器systemd服务...
[2025-11-22 15:09:20] [INFO] ✅ Systemd服务配置完成
[2025-11-22 15:09:20] [INFO] 创建迁移标记文件...
[2025-11-22 15:09:22] [INFO] ✅ 迁移标记已创建
[2025-11-22 15:09:22] [INFO] 准备重启目标服务器...
[2025-11-22 15:09:24] [INFO] ✅ 重启命令已发送
[2025-11-22 15:09:24] [INFO] ⏳ 等待服务器重启...
[2025-11-22 15:09:34] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 15:09:34] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:09:37] [ERROR] SSH连接失败: ssh: connect to host 159.65.104.203 port 22: Connection refused

[2025-11-22 15:09:47] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:09:49] [INFO] SSH连接测试成功
[2025-11-22 15:09:49] [INFO] ✅ 目标服务器已上线 (耗时: 15秒)
[2025-11-22 15:09:49] [INFO] 重启后再次从GitHub同步最新数据...
[2025-11-22 15:09:49] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:09:53] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:09:53] [INFO] 验证目标服务器服务状态...
[2025-11-22 15:09:55] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 15:09:57] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 15:09:57] [INFO] ============================================================
[2025-11-22 15:09:57] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 15:09:57] [INFO] ============================================================
[2025-11-22 15:09:57] [INFO] 更新DNS: a -> 159.65.104.203
[2025-11-22 15:09:57] [INFO] 更新域名解析: a.ssfxx.com -> 159.65.104.203
[2025-11-22 15:09:57] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 15:09:57] [INFO] ✅ DNS记录已更新: a.ssfxx.com 104.248.191.16 -> 159.65.104.203
[2025-11-22 15:09:57] [INFO] ✅ DNS已更新
[2025-11-22 15:09:57] [INFO] 更新服务器状态...
[2025-11-22 15:09:57] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:09:58] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:09:58] [INFO] 服务器 159.65.104.203 状态已更新: active
[2025-11-22 15:09:58] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:10:00] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:10:00] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 15:10:00] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:10:00] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:10:00] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:10:02] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:10:02] [INFO] ============================================================
[2025-11-22 15:10:02] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 15:10:02] [INFO] ============================================================
[2025-11-22 15:10:02] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 15:10:02] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 15:10:02] [INFO] 迁移开始时间: 2025-11-22 15:06:56
[2025-11-22 15:10:02] [INFO] 迁移结束时间: 2025-11-22 15:10:02
[2025-11-22 15:10:02] [INFO] 总耗时: 185.86秒 (3.1分钟)
[2025-11-22 15:10:02] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_150653.log
[2025-11-22 15:10:02] [INFO] ============================================================
[2025-11-22 15:10:02] [INFO] ============================================================
[2025-11-22 15:10:02] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 15:10:02] [INFO] ============================================================
[2025-11-22 15:10:02] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 15:35:06] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:35:06] [INFO] CloudFlare API已初始化
[2025-11-22 15:35:06] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:35:06] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:35:06] [INFO] 删除服务器: 159.65.104.203
[2025-11-22 15:35:06] [INFO] 服务器列表已保存
[2025-11-22 15:35:06] [INFO] ✅ 已删除服务器: 159.65.104.203
[2025-11-22 15:35:06] [INFO] ✅ 已从本地列表删除
[2025-11-22 15:35:06] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:35:07] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:35:07] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:35:13] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:35:13] [INFO] CloudFlare API已初始化
[2025-11-22 15:35:13] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:35:13] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:35:13] [INFO] 添加新服务器: 159.65.104.203
[2025-11-22 15:35:13] [INFO] 服务器列表已保存
[2025-11-22 15:35:13] [INFO] 已添加新服务器: 159.65.104.203
[2025-11-22 15:35:13] [INFO] ✅ 已添加到本地列表
[2025-11-22 15:35:13] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:35:14] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:35:14] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:35:21] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:35:21] [INFO] CloudFlare API已初始化
[2025-11-22 15:35:21] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:35:21] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:35:21] [INFO] ============================================================
[2025-11-22 15:35:21] [INFO] 初始化 Hermit Crab
[2025-11-22 15:35:21] [INFO] ============================================================
[2025-11-22 15:35:21] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 15:35:21] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 15:35:21] [INFO] ✅ 初始化完成
[2025-11-22 15:35:21] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 15:35:21] [INFO] ============================================================
[2025-11-22 15:35:21] [INFO] Hermit Crab 服务器状态
[2025-11-22 15:35:21] [INFO] ============================================================
[2025-11-22 15:35:21] [INFO] 状态: ✅ HEALTHY
[2025-11-22 15:35:21] [INFO] 当前IP: 170.64.226.135
[2025-11-22 15:35:21] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 15:35:21] [INFO] 添加日期: 2025-11-22
[2025-11-22 15:35:21] [INFO] 过期日期: 2025-12-07
[2025-11-22 15:35:21] [INFO] 剩余天数: 14 天
[2025-11-22 15:35:21] [INFO] 迁移次数: 0
[2025-11-22 15:35:21] [INFO] 需要迁移: 否
[2025-11-22 15:35:21] [INFO] ============================================================
[2025-11-22 15:35:34] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:35:34] [INFO] CloudFlare API已初始化
[2025-11-22 15:35:34] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:35:34] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:35:34] [INFO] ============================================================
[2025-11-22 15:35:34] [INFO] 启动自动迁移
[2025-11-22 15:35:34] [INFO] ============================================================
[2025-11-22 15:35:34] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 15:35:34] [INFO] ✅ 自动迁移已启动
[2025-11-22 15:35:34] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 15:35:34] [INFO] ============================================================
[2025-11-22 15:35:35] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:35:35] [INFO] CloudFlare API已初始化
[2025-11-22 15:35:35] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:35:35] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:35:35] [INFO] ============================================================
[2025-11-22 15:35:35] [INFO] Hermit Crab 守护进程启动
[2025-11-22 15:35:35] [INFO] ============================================================
[2025-11-22 15:35:35] [INFO] 
[2025-11-22 15:35:35] 执行检查...
[2025-11-22 15:35:35] [INFO] ============================================================
[2025-11-22 15:35:35] [INFO] 执行迁移检查
[2025-11-22 15:35:35] [INFO] ============================================================
[2025-11-22 15:35:35] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 15:35:35] [INFO] 当前服务器剩余: 14 天
[2025-11-22 15:35:35] [INFO] ✅ 暂不需要迁移
[2025-11-22 15:35:35] [INFO] 下次检查时间: 3600秒后
[2025-11-22 15:36:35] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:36:35] [INFO] CloudFlare API已初始化
[2025-11-22 15:36:35] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:36:35] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:36:35] [INFO] ============================================================
[2025-11-22 15:36:35] [INFO] 启动自动迁移
[2025-11-22 15:36:35] [INFO] ============================================================
[2025-11-22 15:36:35] [INFO] ✅ 自动迁移已在运行中
[2025-11-22 15:37:15] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:37:15] [INFO] CloudFlare API已初始化
[2025-11-22 15:37:15] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:37:15] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:37:15] [INFO] ============================================================
[2025-11-22 15:37:15] [INFO] 停止自动迁移
[2025-11-22 15:37:15] [INFO] ============================================================
[2025-11-22 15:37:15] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 15:37:15] [INFO] ✅ 自动迁移已停止
[2025-11-22 15:37:15] [INFO] 需要手动执行 'hermit-crab migrate' 进行迁移
[2025-11-22 15:37:15] [INFO] ============================================================
[2025-11-22 15:37:20] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:37:20] [INFO] CloudFlare API已初始化
[2025-11-22 15:37:20] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:37:20] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:37:20] [INFO] ============================================================
[2025-11-22 15:37:20] [INFO] 启动自动迁移
[2025-11-22 15:37:20] [INFO] ============================================================
[2025-11-22 15:37:20] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 15:37:20] [INFO] ✅ 自动迁移已启动
[2025-11-22 15:37:20] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 15:37:20] [INFO] ============================================================
[2025-11-22 15:37:21] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:37:21] [INFO] CloudFlare API已初始化
[2025-11-22 15:37:21] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:37:21] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [INFO] Hermit Crab 守护进程启动
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [INFO] 
[2025-11-22 15:37:21] 执行检查...
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [INFO] 执行迁移检查
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:37:21] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:37:21] [WARNING] 🚨 需要执行迁移！
[2025-11-22 15:37:21] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [INFO] 开始执行迁移流程
[2025-11-22 15:37:21] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_153721.log
[2025-11-22 15:37:21] [INFO] ============================================================
[2025-11-22 15:37:21] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:37:22] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 15:37:22] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:37:22] [INFO] 从GitHub同步服务器列表...
[2025-11-22 15:37:22] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:37:22] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:37:22] [INFO] 服务器列表已保存
[2025-11-22 15:37:22] [INFO] 自动选择目标服务器...
[2025-11-22 15:37:22] [INFO] 找到 2 个可用服务器
[2025-11-22 15:37:22] [INFO] 选择高优先级服务器: 104.248.191.16 (剩余 14 天)
[2025-11-22 15:37:22] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 15:37:22] [INFO] 目标剩余时间: 14 天
[2025-11-22 15:37:22] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 15:37:22] [INFO] 尝试获取服务器锁: 104.248.191.16
[2025-11-22 15:37:22] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:37:23] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:37:23] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:37:24] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:37:24] [INFO] ✅ 成功获取服务器锁: 104.248.191.16
[2025-11-22 15:37:24] [INFO] 迁移开始时间: 2025-11-22 15:37:24
[2025-11-22 15:37:25] [INFO] ============================================================
[2025-11-22 15:37:25] [INFO] 开始迁移到目标服务器: 104.248.191.16
[2025-11-22 15:37:25] [INFO] ============================================================
[2025-11-22 15:37:25] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 15:37:27] [INFO] SSH连接测试成功
[2025-11-22 15:37:27] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 15:37:30] [INFO] SSH密钥配置成功
[2025-11-22 15:37:30] [INFO] 在目标服务器备份关键文件...
[2025-11-22 15:37:40] [INFO] 关键文件备份完成
[2025-11-22 15:37:40] [INFO] ============================================================
[2025-11-22 15:37:40] [INFO] 开始Rsync系统文件同步...
[2025-11-22 15:37:40] [INFO] ============================================================
[2025-11-22 15:37:40] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@104.248.191.16:/
[2025-11-22 15:37:40] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 15:37:40] [INFO] ------------------------------------------------------------
[2025-11-22 15:39:25] [INFO] ------------------------------------------------------------
[2025-11-22 15:39:25] [INFO] 传输统计: 共处理 339 个文件/目录
[2025-11-22 15:39:25] [INFO] ✅ Rsync同步完成 (耗时: 105.02秒)
[2025-11-22 15:39:25] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 15:39:25] [INFO] 配置SSH密钥到 104.248.191.16
[2025-11-22 15:39:30] [INFO] SSH密钥配置成功
[2025-11-22 15:39:30] [INFO] 恢复目标服务器网络配置...
[2025-11-22 15:39:39] [INFO] 网络配置恢复完成
[2025-11-22 15:39:39] [INFO] ============================================================
[2025-11-22 15:39:39] [INFO] ✅ 迁移完成！
[2025-11-22 15:39:39] [INFO] ============================================================
[2025-11-22 15:39:39] [INFO] 迁移记录已添加: 104.248.191.16
[2025-11-22 15:39:39] [INFO] ============================================================
[2025-11-22 15:39:39] [INFO] 开始初始化目标服务器
[2025-11-22 15:39:39] [INFO] 目标IP: 104.248.191.16
[2025-11-22 15:39:39] [INFO] 目标剩余天数: 14
[2025-11-22 15:39:39] [INFO] ============================================================
[2025-11-22 15:39:39] [INFO] 同步配置文件到目标服务器...
[2025-11-22 15:39:42] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 15:39:45] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 15:39:45] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 15:39:45] [INFO] 读取源服务器lifecycle，包含 1 条迁移历史
[2025-11-22 15:39:48] [INFO] ✅ 生命周期信息已更新（保留迁移历史）
[2025-11-22 15:39:48] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:39:51] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:39:51] [INFO] 配置目标服务器systemd服务...
[2025-11-22 15:39:58] [INFO] ✅ Systemd服务配置完成
[2025-11-22 15:39:58] [INFO] 创建迁移标记文件...
[2025-11-22 15:40:00] [INFO] ✅ 迁移标记已创建
[2025-11-22 15:40:00] [INFO] 准备重启目标服务器...
[2025-11-22 15:40:02] [INFO] ✅ 重启命令已发送
[2025-11-22 15:40:02] [INFO] ⏳ 等待服务器重启...
[2025-11-22 15:40:12] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 15:40:12] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 15:40:14] [ERROR] SSH连接失败: ssh: connect to host 104.248.191.16 port 22: Connection refused

[2025-11-22 15:40:24] [INFO] 测试SSH连接: 104.248.191.16
[2025-11-22 15:40:26] [INFO] SSH连接测试成功
[2025-11-22 15:40:26] [INFO] ✅ 目标服务器已上线 (耗时: 14秒)
[2025-11-22 15:40:26] [INFO] 重启后再次从GitHub同步最新数据...
[2025-11-22 15:40:26] [INFO] 等待 15 秒确保GitHub数据已更新...
[2025-11-22 15:40:41] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:40:45] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:40:45] [INFO] 验证目标服务器服务状态...
[2025-11-22 15:40:47] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 15:40:49] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 15:40:49] [INFO] ============================================================
[2025-11-22 15:40:49] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 15:40:49] [INFO] ============================================================
[2025-11-22 15:40:49] [INFO] 更新DNS: a -> 104.248.191.16
[2025-11-22 15:40:49] [INFO] 更新域名解析: a.ssfxx.com -> 104.248.191.16
[2025-11-22 15:40:49] [INFO] 找到DNS记录: a.ssfxx.com -> 159.65.104.203
[2025-11-22 15:40:50] [INFO] ✅ DNS记录已更新: a.ssfxx.com 159.65.104.203 -> 104.248.191.16
[2025-11-22 15:40:50] [INFO] ✅ DNS已更新
[2025-11-22 15:40:50] [INFO] 更新服务器状态...
[2025-11-22 15:40:50] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:40:50] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:40:50] [INFO] 服务器 104.248.191.16 状态已更新: active
[2025-11-22 15:40:50] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:40:52] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:40:52] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 15:40:52] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:40:52] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:40:52] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:40:54] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:40:54] [INFO] ============================================================
[2025-11-22 15:40:54] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 15:40:54] [INFO] ============================================================
[2025-11-22 15:40:54] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 15:40:54] [INFO] 目标服务器IP: 104.248.191.16
[2025-11-22 15:40:54] [INFO] 迁移开始时间: 2025-11-22 15:37:24
[2025-11-22 15:40:54] [INFO] 迁移结束时间: 2025-11-22 15:40:54
[2025-11-22 15:40:54] [INFO] 总耗时: 209.69秒 (3.5分钟)
[2025-11-22 15:40:54] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_153721.log
[2025-11-22 15:40:54] [INFO] ============================================================
[2025-11-22 15:40:54] [INFO] ============================================================
[2025-11-22 15:40:54] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 15:40:54] [INFO] ============================================================
[2025-11-22 15:40:54] [INFO] 正在停止 hermit-crab-daemon 服务...
[2025-11-22 15:50:03] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:50:03] [INFO] CloudFlare API已初始化
[2025-11-22 15:50:03] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:50:03] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:50:03] [INFO] ============================================================
[2025-11-22 15:50:03] [INFO] 初始化 Hermit Crab
[2025-11-22 15:50:03] [INFO] ============================================================
[2025-11-22 15:50:04] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 15:50:04] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 15:50:04] [INFO] ✅ 初始化完成
[2025-11-22 15:50:04] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 15:50:04] [INFO] ============================================================
[2025-11-22 15:50:04] [INFO] Hermit Crab 服务器状态
[2025-11-22 15:50:04] [INFO] ============================================================
[2025-11-22 15:50:04] [INFO] 状态: ✅ HEALTHY
[2025-11-22 15:50:04] [INFO] 当前IP: 170.64.226.135
[2025-11-22 15:50:04] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 15:50:04] [INFO] 添加日期: 2025-11-22
[2025-11-22 15:50:04] [INFO] 过期日期: 2025-12-07
[2025-11-22 15:50:04] [INFO] 剩余天数: 14 天
[2025-11-22 15:50:04] [INFO] 迁移次数: 0
[2025-11-22 15:50:04] [INFO] 需要迁移: 否
[2025-11-22 15:50:04] [INFO] ============================================================
[2025-11-22 15:50:54] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:50:54] [INFO] CloudFlare API已初始化
[2025-11-22 15:50:54] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:50:54] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:50:54] [INFO] 删除服务器: 104.248.191.16
[2025-11-22 15:50:54] [INFO] 服务器列表已保存
[2025-11-22 15:50:54] [INFO] ✅ 已删除服务器: 104.248.191.16
[2025-11-22 15:50:54] [INFO] ✅ 已从本地列表删除
[2025-11-22 15:50:54] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:50:56] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:50:56] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:51:06] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:51:06] [INFO] CloudFlare API已初始化
[2025-11-22 15:51:06] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:51:06] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:51:06] [INFO] 添加新服务器: 104.248.191.16
[2025-11-22 15:51:06] [INFO] 服务器列表已保存
[2025-11-22 15:51:06] [INFO] 已添加新服务器: 104.248.191.16
[2025-11-22 15:51:06] [INFO] ✅ 已添加到本地列表
[2025-11-22 15:51:06] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:51:08] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:51:08] [INFO] ✅ 已同步到GitHub
[2025-11-22 15:51:15] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:51:15] [INFO] CloudFlare API已初始化
[2025-11-22 15:51:15] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:51:15] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:51:15] [INFO] ============================================================
[2025-11-22 15:51:15] [INFO] 初始化 Hermit Crab
[2025-11-22 15:51:15] [INFO] ============================================================
[2025-11-22 15:51:15] [INFO] 生命周期已初始化: 2025-11-22 -> 2025-12-07 (15天)
[2025-11-22 15:51:15] [INFO] 业务域名: a.ssfxx.com
[2025-11-22 15:51:15] [INFO] ✅ 初始化完成
[2025-11-22 15:51:15] [INFO] 剩余时间 14 天，暂不需要迁移
[2025-11-22 15:51:15] [INFO] ============================================================
[2025-11-22 15:51:15] [INFO] Hermit Crab 服务器状态
[2025-11-22 15:51:15] [INFO] ============================================================
[2025-11-22 15:51:15] [INFO] 状态: ✅ HEALTHY
[2025-11-22 15:51:15] [INFO] 当前IP: 170.64.226.135
[2025-11-22 15:51:15] [INFO] 当前域名: a.ssfxx.com
[2025-11-22 15:51:15] [INFO] 添加日期: 2025-11-22
[2025-11-22 15:51:15] [INFO] 过期日期: 2025-12-07
[2025-11-22 15:51:15] [INFO] 剩余天数: 14 天
[2025-11-22 15:51:15] [INFO] 迁移次数: 0
[2025-11-22 15:51:15] [INFO] 需要迁移: 否
[2025-11-22 15:51:15] [INFO] ============================================================
[2025-11-22 15:54:09] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:54:09] [INFO] CloudFlare API已初始化
[2025-11-22 15:54:09] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:54:09] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:54:09] [INFO] ============================================================
[2025-11-22 15:54:09] [INFO] 启动自动迁移
[2025-11-22 15:54:09] [INFO] ============================================================
[2025-11-22 15:54:09] [INFO] 正在启动 hermit-crab-daemon 服务...
[2025-11-22 15:54:09] [INFO] ✅ 自动迁移已启动
[2025-11-22 15:54:09] [INFO] 系统将持续监控服务器状态并在需要时自动执行迁移
[2025-11-22 15:54:09] [INFO] ============================================================
[2025-11-22 15:54:10] [INFO] GitHub仓库已连接: ssfxx0923/hermit-nodes
[2025-11-22 15:54:10] [INFO] CloudFlare API已初始化
[2025-11-22 15:54:10] [INFO] Hermit Crab Agent 已启动
[2025-11-22 15:54:10] [INFO] ✅ 邮件通知已启用 -> ssfxx44533@qq.com
[2025-11-22 15:54:10] [INFO] ============================================================
[2025-11-22 15:54:10] [INFO] Hermit Crab 守护进程启动
[2025-11-22 15:54:10] [INFO] ============================================================
[2025-11-22 15:54:10] [INFO] 
[2025-11-22 15:54:10] 执行检查...
[2025-11-22 15:54:10] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:54:11] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:54:11] [INFO] 服务器列表已保存
[2025-11-22 15:54:11] [INFO] ============================================================
[2025-11-22 15:54:11] [INFO] 执行迁移检查
[2025-11-22 15:54:11] [INFO] ============================================================
[2025-11-22 15:54:11] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:54:11] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:54:11] [WARNING] 🚨 需要执行迁移！
[2025-11-22 15:54:11] [WARNING] 检测到需要迁移，开始自动迁移...
[2025-11-22 15:54:11] [INFO] ============================================================
[2025-11-22 15:54:11] [INFO] 开始执行迁移流程
[2025-11-22 15:54:11] [INFO] 迁移日志: /root/hermit_crab/logs/migrations/migration_20251122_155411.log
[2025-11-22 15:54:11] [INFO] ============================================================
[2025-11-22 15:54:11] [WARNING] 剩余时间 4 天，低于阈值 5 天，需要迁移！
[2025-11-22 15:54:11] [INFO] 当前服务器IP: 170.64.226.135
[2025-11-22 15:54:11] [INFO] 当前服务器剩余: 4 天
[2025-11-22 15:54:11] [INFO] 从GitHub同步服务器列表...
[2025-11-22 15:54:11] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:54:12] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:54:12] [INFO] 服务器列表已保存
[2025-11-22 15:54:12] [INFO] 自动选择目标服务器...
[2025-11-22 15:54:12] [INFO] 找到 2 个可用服务器
[2025-11-22 15:54:12] [INFO] 选择高优先级服务器: 159.65.104.203 (剩余 14 天)
[2025-11-22 15:54:12] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 15:54:12] [INFO] 目标剩余时间: 14 天
[2025-11-22 15:54:12] [INFO] ✅ 已从环境变量获取SSH密码
[2025-11-22 15:54:12] [INFO] 尝试获取服务器锁: 159.65.104.203
[2025-11-22 15:54:12] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:54:13] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:54:13] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:54:14] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:54:14] [INFO] ✅ 成功获取服务器锁: 159.65.104.203
[2025-11-22 15:54:14] [INFO] 迁移开始时间: 2025-11-22 15:54:14
[2025-11-22 15:54:14] [INFO] ============================================================
[2025-11-22 15:54:14] [INFO] 开始迁移到目标服务器: 159.65.104.203
[2025-11-22 15:54:14] [INFO] ============================================================
[2025-11-22 15:54:14] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:54:17] [INFO] SSH连接测试成功
[2025-11-22 15:54:17] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 15:54:20] [INFO] SSH密钥配置成功
[2025-11-22 15:54:20] [INFO] 在目标服务器备份关键文件...
[2025-11-22 15:54:30] [INFO] 关键文件备份完成
[2025-11-22 15:54:30] [INFO] ============================================================
[2025-11-22 15:54:30] [INFO] 开始Rsync系统文件同步...
[2025-11-22 15:54:30] [INFO] ============================================================
[2025-11-22 15:54:30] [INFO] 执行命令: rsync -aAXvzP --delete --numeric-ids --exclude-from=/root/hermit_crab/config/exclude_list.txt -e "ssh -i /root/.ssh/hermit_crab_id_rsa -o StrictHostKeyChecking=no" / root@159.65.104.203:/
[2025-11-22 15:54:30] [INFO] Rsync 传输中，实时进度显示：
[2025-11-22 15:54:30] [INFO] ------------------------------------------------------------
[2025-11-22 15:56:18] [INFO] ------------------------------------------------------------
[2025-11-22 15:56:18] [INFO] 传输统计: 共处理 308 个文件/目录
[2025-11-22 15:56:18] [INFO] ✅ Rsync同步完成 (耗时: 107.90秒)
[2025-11-22 15:56:18] [INFO] 重新配置SSH密钥（rsync后）...
[2025-11-22 15:56:18] [INFO] 配置SSH密钥到 159.65.104.203
[2025-11-22 15:56:23] [INFO] SSH密钥配置成功
[2025-11-22 15:56:23] [INFO] 恢复目标服务器网络配置...
[2025-11-22 15:56:32] [INFO] 网络配置恢复完成
[2025-11-22 15:56:32] [INFO] ============================================================
[2025-11-22 15:56:32] [INFO] ✅ 迁移完成！
[2025-11-22 15:56:32] [INFO] ============================================================
[2025-11-22 15:56:32] [INFO] 迁移记录已添加: 159.65.104.203
[2025-11-22 15:56:32] [INFO] ============================================================
[2025-11-22 15:56:32] [INFO] 开始初始化目标服务器
[2025-11-22 15:56:32] [INFO] 目标IP: 159.65.104.203
[2025-11-22 15:56:32] [INFO] 目标剩余天数: 14
[2025-11-22 15:56:32] [INFO] ============================================================
[2025-11-22 15:56:32] [INFO] 同步配置文件到目标服务器...
[2025-11-22 15:56:35] [INFO] ✅ 已同步: /root/hermit_crab/.env
[2025-11-22 15:56:38] [INFO] ✅ 已同步: /root/hermit_crab/data/nodes.json
[2025-11-22 15:56:38] [INFO] 更新目标服务器生命周期信息...
[2025-11-22 15:56:38] [INFO] 读取源服务器lifecycle，包含 1 条迁移历史
[2025-11-22 15:56:41] [INFO] ✅ 生命周期信息已更新（保留迁移历史）
[2025-11-22 15:56:41] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:56:44] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:56:44] [INFO] 配置目标服务器systemd服务...
[2025-11-22 15:56:51] [INFO] ✅ Systemd服务配置完成
[2025-11-22 15:56:51] [INFO] 创建迁移标记文件...
[2025-11-22 15:56:53] [INFO] ✅ 迁移标记已创建
[2025-11-22 15:56:53] [INFO] 准备重启目标服务器...
[2025-11-22 15:56:55] [INFO] ✅ 重启命令已发送
[2025-11-22 15:56:55] [INFO] ⏳ 等待服务器重启...
[2025-11-22 15:57:05] [INFO] 等待目标服务器上线 (最多等待 120 秒)...
[2025-11-22 15:57:05] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:57:07] [ERROR] SSH连接失败: ssh: connect to host 159.65.104.203 port 22: Connection refused

[2025-11-22 15:57:17] [INFO] 测试SSH连接: 159.65.104.203
[2025-11-22 15:57:20] [INFO] SSH连接测试成功
[2025-11-22 15:57:20] [INFO] ✅ 目标服务器已上线 (耗时: 14秒)
[2025-11-22 15:57:20] [INFO] 重启后再次从GitHub同步最新数据...
[2025-11-22 15:57:20] [INFO] 等待 15 秒确保GitHub数据已更新...
[2025-11-22 15:57:35] [INFO] 从GitHub同步最新服务器列表到目标服务器...
[2025-11-22 15:57:38] [INFO] ✅ 目标服务器已从GitHub同步最新数据
[2025-11-22 15:57:38] [INFO] 验证目标服务器服务状态...
[2025-11-22 15:57:40] [WARNING] ⚠️  Hermit Crab服务: 未运行
[2025-11-22 15:57:42] [INFO] ✅ Hermit Crab定时器: 运行中
[2025-11-22 15:57:42] [INFO] ============================================================
[2025-11-22 15:57:42] [INFO] ✅ 目标服务器初始化完成
[2025-11-22 15:57:42] [INFO] ============================================================
[2025-11-22 15:57:42] [INFO] 更新DNS: a -> 159.65.104.203
[2025-11-22 15:57:42] [INFO] 更新域名解析: a.ssfxx.com -> 159.65.104.203
[2025-11-22 15:57:43] [INFO] 找到DNS记录: a.ssfxx.com -> 104.248.191.16
[2025-11-22 15:57:43] [INFO] ✅ DNS记录已更新: a.ssfxx.com 104.248.191.16 -> 159.65.104.203
[2025-11-22 15:57:43] [INFO] ✅ DNS已更新
[2025-11-22 15:57:43] [INFO] 更新服务器状态...
[2025-11-22 15:57:43] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:57:43] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:57:43] [INFO] 服务器 159.65.104.203 状态已更新: active
[2025-11-22 15:57:43] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:57:45] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:57:45] [INFO] 删除源服务器: 170.64.226.135
[2025-11-22 15:57:45] [INFO] 从GitHub拉取: nodes.json
[2025-11-22 15:57:46] [INFO] ✅ 成功拉取服务器列表 (2 个服务器)
[2025-11-22 15:57:46] [INFO] 推送服务器列表到GitHub...
[2025-11-22 15:57:47] [INFO] ✅ 服务器列表已更新到GitHub
[2025-11-22 15:57:48] [INFO] ============================================================
[2025-11-22 15:57:48] [INFO] 🎉 迁移流程全部完成！
[2025-11-22 15:57:48] [INFO] ============================================================
[2025-11-22 15:57:48] [INFO] 源服务器IP: 170.64.226.135
[2025-11-22 15:57:48] [INFO] 目标服务器IP: 159.65.104.203
[2025-11-22 15:57:48] [INFO] 迁移开始时间: 2025-11-22 15:54:14
[2025-11-22 15:57:48] [INFO] 迁移结束时间: 2025-11-22 15:57:47
[2025-11-22 15:57:48] [INFO] 总耗时: 212.91秒 (3.5分钟)
[2025-11-22 15:57:48] [INFO] 迁移日志已保存: /root/hermit_crab/logs/migrations/migration_20251122_155411.log
[2025-11-22 15:57:48] [INFO] ============================================================
[2025-11-22 15:57:48] [INFO] ============================================================
[2025-11-22 15:57:48] [INFO] 自动迁移成功！源服务器开始退役流程...
[2025-11-22 15:57:48] [INFO] ============================================================
[2025-11-22 15:57:48] [INFO] 正在停止 hermit-crab-daemon 服务...
